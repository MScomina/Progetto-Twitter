(function(){var e={6700:function(e,t,s){var a={"./af":3906,"./af.js":3906,"./ar":902,"./ar-dz":3853,"./ar-dz.js":3853,"./ar-kw":299,"./ar-kw.js":299,"./ar-ly":6825,"./ar-ly.js":6825,"./ar-ma":6379,"./ar-ma.js":6379,"./ar-sa":7700,"./ar-sa.js":7700,"./ar-tn":2059,"./ar-tn.js":2059,"./ar.js":902,"./az":6043,"./az.js":6043,"./be":7936,"./be.js":7936,"./bg":4078,"./bg.js":4078,"./bm":4014,"./bm.js":4014,"./bn":9554,"./bn-bd":7114,"./bn-bd.js":7114,"./bn.js":9554,"./bo":6529,"./bo.js":6529,"./br":5437,"./br.js":5437,"./bs":9647,"./bs.js":9647,"./ca":9951,"./ca.js":9951,"./cs":6113,"./cs.js":6113,"./cv":7965,"./cv.js":7965,"./cy":5858,"./cy.js":5858,"./da":3515,"./da.js":3515,"./de":2831,"./de-at":6263,"./de-at.js":6263,"./de-ch":1127,"./de-ch.js":1127,"./de.js":2831,"./dv":4510,"./dv.js":4510,"./el":8616,"./el.js":8616,"./en-au":4595,"./en-au.js":4595,"./en-ca":3545,"./en-ca.js":3545,"./en-gb":9609,"./en-gb.js":9609,"./en-ie":3727,"./en-ie.js":3727,"./en-il":3302,"./en-il.js":3302,"./en-in":6305,"./en-in.js":6305,"./en-nz":9128,"./en-nz.js":9128,"./en-sg":4569,"./en-sg.js":4569,"./eo":650,"./eo.js":650,"./es":6358,"./es-do":4214,"./es-do.js":4214,"./es-mx":8639,"./es-mx.js":8639,"./es-us":232,"./es-us.js":232,"./es.js":6358,"./et":7279,"./et.js":7279,"./eu":5515,"./eu.js":5515,"./fa":7981,"./fa.js":7981,"./fi":7090,"./fi.js":7090,"./fil":9208,"./fil.js":9208,"./fo":2799,"./fo.js":2799,"./fr":3463,"./fr-ca":2213,"./fr-ca.js":2213,"./fr-ch":2848,"./fr-ch.js":2848,"./fr.js":3463,"./fy":1468,"./fy.js":1468,"./ga":8163,"./ga.js":8163,"./gd":2898,"./gd.js":2898,"./gl":6312,"./gl.js":6312,"./gom-deva":682,"./gom-deva.js":682,"./gom-latn":9178,"./gom-latn.js":9178,"./gu":5009,"./gu.js":5009,"./he":2795,"./he.js":2795,"./hi":7009,"./hi.js":7009,"./hr":6506,"./hr.js":6506,"./hu":9565,"./hu.js":9565,"./hy-am":3864,"./hy-am.js":3864,"./id":5626,"./id.js":5626,"./is":6649,"./is.js":6649,"./it":151,"./it-ch":5348,"./it-ch.js":5348,"./it.js":151,"./ja":9830,"./ja.js":9830,"./jv":3751,"./jv.js":3751,"./ka":3365,"./ka.js":3365,"./kk":5980,"./kk.js":5980,"./km":9571,"./km.js":9571,"./kn":5880,"./kn.js":5880,"./ko":6809,"./ko.js":6809,"./ku":6773,"./ku.js":6773,"./ky":5505,"./ky.js":5505,"./lb":553,"./lb.js":553,"./lo":1237,"./lo.js":1237,"./lt":1563,"./lt.js":1563,"./lv":1057,"./lv.js":1057,"./me":6495,"./me.js":6495,"./mi":3096,"./mi.js":3096,"./mk":3874,"./mk.js":3874,"./ml":6055,"./ml.js":6055,"./mn":7747,"./mn.js":7747,"./mr":7113,"./mr.js":7113,"./ms":8687,"./ms-my":7948,"./ms-my.js":7948,"./ms.js":8687,"./mt":4532,"./mt.js":4532,"./my":4655,"./my.js":4655,"./nb":6961,"./nb.js":6961,"./ne":2512,"./ne.js":2512,"./nl":8448,"./nl-be":2936,"./nl-be.js":2936,"./nl.js":8448,"./nn":9031,"./nn.js":9031,"./oc-lnc":5174,"./oc-lnc.js":5174,"./pa-in":118,"./pa-in.js":118,"./pl":3448,"./pl.js":3448,"./pt":3518,"./pt-br":2447,"./pt-br.js":2447,"./pt.js":3518,"./ro":817,"./ro.js":817,"./ru":262,"./ru.js":262,"./sd":8990,"./sd.js":8990,"./se":3842,"./se.js":3842,"./si":7711,"./si.js":7711,"./sk":756,"./sk.js":756,"./sl":3772,"./sl.js":3772,"./sq":6187,"./sq.js":6187,"./sr":732,"./sr-cyrl":5713,"./sr-cyrl.js":5713,"./sr.js":732,"./ss":9455,"./ss.js":9455,"./sv":9770,"./sv.js":9770,"./sw":959,"./sw.js":959,"./ta":6459,"./ta.js":6459,"./te":5302,"./te.js":5302,"./tet":7975,"./tet.js":7975,"./tg":1294,"./tg.js":1294,"./th":2385,"./th.js":2385,"./tk":4613,"./tk.js":4613,"./tl-ph":8668,"./tl-ph.js":8668,"./tlh":8190,"./tlh.js":8190,"./tr":4506,"./tr.js":4506,"./tzl":3440,"./tzl.js":3440,"./tzm":9852,"./tzm-latn":2350,"./tzm-latn.js":2350,"./tzm.js":9852,"./ug-cn":730,"./ug-cn.js":730,"./uk":99,"./uk.js":99,"./ur":2100,"./ur.js":2100,"./uz":6002,"./uz-latn":6322,"./uz-latn.js":6322,"./uz.js":6002,"./vi":4207,"./vi.js":4207,"./x-pseudo":4674,"./x-pseudo.js":4674,"./yo":570,"./yo.js":570,"./zh-cn":3644,"./zh-cn.js":3644,"./zh-hk":2591,"./zh-hk.js":2591,"./zh-mo":9503,"./zh-mo.js":9503,"./zh-tw":8080,"./zh-tw.js":8080};function r(e){var t=n(e);return s(t)}function n(e){if(!s.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=n,e.exports=r,r.id=6700},754:function(e,t,s){"use strict";var a=s(9242),r=s(2483),n=s(65),i=s(3396);const o={class:"app",id:"app"};function l(e,t,s,a,r,n){const l=(0,i.up)("navbar");return(0,i.wg)(),(0,i.iD)("div",o,[((0,i.wg)(),(0,i.j4)((0,i.LL)(n.currentView),{class:"view"})),(0,i.Wm)(l)])}const u=e=>((0,i.dD)("data-v-333c5fd8"),e=e(),(0,i.Cn)(),e),h={id:"navbar",class:"container"},d={class:"navbar"},m={class:"nav-left"},c={class:"nav-center"},p=["placeholder"],g=u((()=>(0,i._)("button",{type:"submit",class:"nav-button search-button"},"Search",-1))),f={class:"nav-right"};function w(e,t,s,r,n,o){const l=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",h,[(0,i._)("nav",d,[(0,i._)("div",m,[(0,i.Wm)(l,{to:"/",class:"nav-button"},{default:(0,i.w5)((()=>[(0,i.Uk)("Home")])),_:1})]),(0,i._)("div",c,[(0,i._)("form",{onSubmit:t[2]||(t[2]=(0,a.iM)(((...e)=>o.search&&o.search(...e)),["prevent"]))},[(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>n.searchTerm=e),id:"search",class:"search-input",placeholder:n.placeholder,onInput:t[1]||(t[1]=(...e)=>o.checkChars&&o.checkChars(...e)),maxlength:"20"},null,40,p),[[a.nr,n.searchTerm]]),g],32)]),(0,i._)("div",f,[this.isAuthenticated?((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[(0,i.Wm)(l,{to:"/write",class:"nav-button"},{default:(0,i.w5)((()=>[(0,i.Uk)("Post")])),_:1}),(0,i.Wm)(l,{to:"/follows",class:"nav-button"},{default:(0,i.w5)((()=>[(0,i.Uk)("Follows")])),_:1})],64)):((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[(0,i.Wm)(l,{to:"/login",class:"nav-button"},{default:(0,i.w5)((()=>[(0,i.Uk)("Login")])),_:1}),(0,i.Wm)(l,{to:"/register",class:"nav-button"},{default:(0,i.w5)((()=>[(0,i.Uk)("Register")])),_:1})],64))])])])}s(7658);var v={name:"Navbar",data(){return{searchTerm:"",placeholder:"Search user...",searchCooldown:!1}},computed:{isAuthenticated(){return this.$store.state.isAuthenticated}},methods:{search(){if(this.searchCooldown)return;const e=this.searchTerm;if(this.searchTerm="",""===e)return void("Write something!"!==this.placeholder&&(this.placeholder="Write something!",setTimeout((()=>{this.placeholder="Search user..."}),3e3)));const t="/search/"+e;this.$router.push({path:t}),this.searchCooldown=!0,setTimeout((()=>{this.searchCooldown=!1}),1e3)},checkChars(){this.searchTerm=this.searchTerm.replace(/[^-_.a-zA-Z0-9]/g,"")}}},j=s(89);const y=(0,j.Z)(v,[["render",w],["__scopeId","data-v-333c5fd8"]]);var k=y;const b={id:"Follow",class:"Follow"},U={key:0},_={key:0},x={key:1};function C(e,t,s,a,r,n){const o=(0,i.up)("message"),l=(0,i.up)("user");return(0,i.wg)(),(0,i.iD)("div",b,[n.isAuthenticated?((0,i.wg)(),(0,i.iD)("div",U,[(0,i.Wm)(o,{title:r.title},null,8,["title"]),n.isFollowing?((0,i.wg)(),(0,i.iD)("div",x,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.following,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e.username},[(0,i.Wm)(l,{user:e,followingBefore:!0},null,8,["user"])])))),128))])):((0,i.wg)(),(0,i.iD)("div",_,[(0,i.Wm)(o,{paragraphs:[r.noFollowingMessage]},null,8,["paragraphs"])]))])):(0,i.kq)("",!0)])}var I=s(7139);const F={class:"title"},M=["textContent"],D={class:"text"},S=["textContent"];function T(e,t,s,a,r,n){const o=(0,i.up)("container");return(0,i.wg)(),(0,i.j4)(o,null,{default:(0,i.w5)((()=>[(0,i._)("div",F,[s.title?((0,i.wg)(),(0,i.iD)("h1",{key:0,textContent:(0,I.zw)(s.title)},null,8,M)):(0,i.kq)("",!0)]),(0,i._)("div",D,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.paragraphs,((e,t)=>((0,i.wg)(),(0,i.iD)("p",{key:t,textContent:(0,I.zw)(e)},null,8,S)))),128))])])),_:1})}const $={id:"container",class:"container"},A={id:"content",class:"content"};function z(e,t){return(0,i.wg)(),(0,i.iD)("div",$,[(0,i._)("div",A,[(0,i.WI)(e.$slots,"default",{},void 0,!0)])])}const O={},W=(0,j.Z)(O,[["render",z],["__scopeId","data-v-79a20d72"]]);var P=W,q={components:{Container:P},name:"message",props:{title:{type:String,default:""},paragraphs:{type:Array,default:[]}}};const L=(0,j.Z)(q,[["render",T],["__scopeId","data-v-5bdf9b45"]]);var E=L;const N=e=>((0,i.dD)("data-v-5c91737e"),e=e(),(0,i.Cn)(),e),Z={id:"user-data",class:"upper-box"},B={class:"user-info"},Y=["textContent"],H=N((()=>(0,i._)("br",null,null,-1))),R=["textContent"],V=N((()=>(0,i._)("br",null,null,-1))),K=["textContent"],G=N((()=>(0,i._)("div",{class:"description"},[(0,i._)("b",null,"Description:")],-1))),J=["textContent"];function Q(e,t,s,r,n,o){const l=(0,i.up)("font-awesome-icon"),u=(0,i.up)("container");return(0,i.wg)(),(0,i.j4)(u,{class:"container"},{default:(0,i.w5)((()=>[(0,i._)("div",Z,[(0,i._)("div",B,[(0,i._)("span",{textContent:(0,I.zw)(o.userInfo.username),class:"username",onClick:t[0]||(t[0]=(...e)=>o.goToProfile&&o.goToProfile(...e))},null,8,Y),H,(0,i._)("span",{textContent:(0,I.zw)(o.userInfo.name)},null,8,R),V,(0,i._)("span",{textContent:(0,I.zw)(o.userInfo.surname)},null,8,K)]),o.shouldShowBell?((0,i.wg)(),(0,i.j4)(l,{key:0,icon:["fas","bell"],class:(0,I.C_)({follow:o.isFollowing}),onClick:(0,a.iM)(o.followUser,["stop"])},null,8,["class","onClick"])):(0,i.kq)("",!0)]),G,(0,i._)("div",{id:"description",textContent:(0,I.zw)(o.computedDescription)},null,8,J)])),_:1})}var X={name:"user-data",components:{Container:P},data(){return{following:!1,followCooldown:!1}},props:{followingBefore:{type:Boolean,default:!1},user:{type:Object,default:function(){return{username:"Username",name:"Nome",surname:"Cognome",description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."}}}},computed:{computedDescription(){return""===this.user.description?"No description set!":this.user.description},isFollowing(){return this.following!==this.followingBefore},userInfo(){return{username:"Username: @"+this.user.username,name:"Name: "+this.user.name,surname:"Surname: "+this.user.surname}},shouldShowBell(){return this.$store.state.isAuthenticated&&this.user.username!==this.$store.state.username}},methods:{async followUser(){if(this.followCooldown||!this.$store.state.isAuthenticated)return;const e="/api/social/followers/"+this.user.username,t=this.following!==this.followingBefore?"DELETE":"POST";fetch(e,{method:t});this.following=!this.following,this.followCooldown=!0,setTimeout((()=>{this.followCooldown=!1}),1e3)},goToProfile(){const e="/user/"+this.user.username;this.$router.push({path:e})}}};const ee=(0,j.Z)(X,[["render",Q],["__scopeId","data-v-5c91737e"]]);var te=ee,se={name:"Follow",components:{Message:E,User:te},data(){return{title:"Following: ",noFollowingMessage:"You aren't following anyone at the moment!",following:[]}},computed:{isAuthenticated(){return this.$store.state.isAuthenticated},isFollowing(){return 0!==this.following.length}},methods:{async retrieveFollows(){const e=await fetch("/api/social/followers/"+this.$store.state.username);if(e.ok){const t=await e.json();this.following=t.following}}},watch:{"$store.state.isAuthenticated":{immediate:!0,handler(e){e&&this.retrieveFollows()}}}};const ae=(0,j.Z)(se,[["render",C],["__scopeId","data-v-094a9f82"]]);var re=ae;const ne={id:"Home",class:"Home"},ie={key:1},oe={key:0},le={key:1};function ue(e,t,s,a,r,n){const o=(0,i.up)("message"),l=(0,i.up)("post");return(0,i.wg)(),(0,i.iD)("div",ne,[n.isAuthenticated?((0,i.wg)(),(0,i.iD)("div",ie,[n.feedsExist?((0,i.wg)(),(0,i.iD)("div",le,[(0,i.Wm)(o,{title:r.titleFeed,class:"feed"},null,8,["title"]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.feeds,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e.messageId},[(0,i.Wm)(l,{messageId:e.messageId,author:e.author,message:e.message,date:e.createdAt,nOfLikes:e.numberOfLikes,likedBefore:e.liked},null,8,["messageId","author","message","date","nOfLikes","likedBefore"])])))),128))])):((0,i.wg)(),(0,i.iD)("div",oe,[(0,i.Wm)(o,{title:r.titleNoFeed,paragraphs:[r.paragraphsNoFeed]},null,8,["title","paragraphs"])]))])):((0,i.wg)(),(0,i.j4)(o,{key:0,title:r.titleUnauth,paragraphs:r.paragraphsUnauth},null,8,["title","paragraphs"]))])}const he=e=>((0,i.dD)("data-v-41c164ab"),e=e(),(0,i.Cn)(),e),de={class:"author"},me={class:"username"},ce=["textContent"],pe={class:"info"},ge=["textContent"],fe=he((()=>(0,i._)("div",{class:"break"},null,-1))),we={class:"message"},ve=["textContent"],je=he((()=>(0,i._)("div",{class:"break"},null,-1))),ye={class:"bottom"},ke={class:"time"},be=["textContent"],Ue=he((()=>(0,i._)("div",{class:"break"},null,-1))),_e={class:"likes"},xe=["textContent"];function Ce(e,t,s,r,n,o){const l=(0,i.up)("font-awesome-icon"),u=(0,i.up)("container");return(0,i.wg)(),(0,i.j4)(u,{class:"container"},{default:(0,i.w5)((()=>[(0,i._)("div",de,[(0,i._)("div",{class:"href",onClick:t[0]||(t[0]=(...e)=>o.messageRoute&&o.messageRoute(...e))}),(0,i._)("cite",me,[(0,i._)("span",{class:"span-username",textContent:(0,I.zw)(o.formatUsername),onClick:t[1]||(t[1]=(...e)=>o.userRoute&&o.userRoute(...e))},null,8,ce)]),(0,i._)("cite",pe,[(0,i._)("span",{class:"span-info",textContent:(0,I.zw)(o.nameAndSurname)},null,8,ge)])]),fe,(0,i._)("div",we,[(0,i._)("p",{textContent:(0,I.zw)(s.message)},null,8,ve)]),je,(0,i._)("div",ye,[(0,i._)("div",ke,[(0,i._)("p",{textContent:(0,I.zw)(o.formattedDate)},null,8,be)]),Ue,(0,i._)("div",_e,[(0,i._)("p",{class:"nOfLikes",textContent:(0,I.zw)(o.numberOfLikes)},null,8,xe),(0,i.Wm)(l,{icon:["fas","thumbs-up"],class:(0,I.C_)({liked:o.isLiked,"like-clickable":o.isAuthenticated}),onClick:(0,a.iM)(o.like,["stop"])},null,8,["class","onClick"])])])])),_:1})}var Ie=s(6797),Fe=s.n(Ie),Me={name:"post",components:{Container:P},data(){return{liked:!1,likeCooldown:!1}},props:{messageId:{type:String,default:"00000000-0000-0000-0000-0000000000"},author:{type:Object,default:function(){return{username:"Username",name:"Nome",surname:"Cognome"}}},message:{type:String,default:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."},date:{type:String,default:"1970-01-01T00:00:00Z"},nOfLikes:{type:Number,default:0},likedBefore:{type:Boolean,default:!1}},computed:{nameAndSurname(){return this.author.name+" "+this.author.surname},formatUsername(){return"@"+this.author.username},numberOfLikes(){return!this.likedBefore&&this.liked?this.nOfLikes+1:this.likedBefore&&this.liked?this.nOfLikes-1:this.nOfLikes},isLiked(){return this.likedBefore!==this.liked},formattedDate(){return Fe()(this.date).format("MMM DD, YYYY HH:mm:ss")},isAuthenticated(){return this.$store.state.isAuthenticated}},methods:{async like(){if(this.likeCooldown||!this.$store.state.isAuthenticated)return;const e="/api/social/like/"+this.messageId,t=this.liked!==this.likedBefore?"DELETE":"POST";fetch(e,{method:t});this.liked=!this.liked,this.likeCooldown=!0,setTimeout((()=>{this.likeCooldown=!1}),1e3)},userRoute(){const e="/user/"+this.author.username;this.$router.push({path:e})},messageRoute(){const e="/message/"+this.author.username+"/"+this.messageId;this.$router.push({path:e})}}};const De=(0,j.Z)(Me,[["render",Ce],["__scopeId","data-v-41c164ab"]]);var Se=De,Te={name:"Home",components:{Message:E,Post:Se},data(){return{titleUnauth:"Welcome!",paragraphsUnauth:['This is a social network web page created by Michele Scomina for the course "Programmazione Web".',"You are currently in the home page.","This page has been built using the Vue.js framework.","You are not authenticated as of right now!"],feeds:[],titleNoFeed:"No feeds!",titleFeed:"Feeds:",paragraphsNoFeed:"You currently do not have any feeds! Start following someone to start getting feeds in your homepage!"}},computed:{isAuthenticated(){return this.$store.state.isAuthenticated},feedsExist(){return!(0===this.feeds.length)}},methods:{async retrieveFeed(){const e=await fetch("/api/social/feed");if(e.ok){const t=await e.json();this.feeds=t.messages}}},watch:{"$store.state.isAuthenticated":{immediate:!0,handler(e){e&&this.retrieveFeed()}}}};const $e=(0,j.Z)(Te,[["render",ue],["__scopeId","data-v-6e3d71c3"]]);var Ae=$e;const ze={id:"Login",class:"Login"};function Oe(e,t,s,a,r,n){const o=(0,i.up)("form-component"),l=(0,i.up)("message");return(0,i.wg)(),(0,i.iD)("div",ze,[(0,i.Wm)(o,{class:"form",fields:r.fields,onFormSubmitted:n.handleSubmit,buttonText:r.buttonText,titleText:r.titleText},null,8,["fields","onFormSubmitted","buttonText","titleText"]),r.showMessage?((0,i.wg)(),(0,i.j4)(l,{key:0,class:"message",paragraphs:[r.message]},null,8,["paragraphs"])):(0,i.kq)("",!0)])}const We=["textContent"],Pe=["type","placeholder","onUpdate:modelValue"],qe=["type","placeholder","onUpdate:modelValue"],Le=["textContent"];function Ee(e,t,s,r,n,o){const l=(0,i.up)("container");return(0,i.wg)(),(0,i.j4)(l,null,{default:(0,i.w5)((()=>[(0,i._)("form",{onSubmit:t[0]||(t[0]=(0,a.iM)(((...e)=>o.submitForm&&o.submitForm(...e)),["prevent"])),class:"form"},[(0,i._)("h1",{textContent:(0,I.zw)(s.titleText)},null,8,We),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.fields,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e.name},[e.isParagraph?(0,i.wy)(((0,i.wg)(),(0,i.iD)("textarea",{key:0,type:e.type,placeholder:e.label,"onUpdate:modelValue":t=>n.fieldValues[e.name]=t},null,8,Pe)),[[a.nr,n.fieldValues[e.name]]]):(0,i.wy)(((0,i.wg)(),(0,i.iD)("input",{key:1,type:e.type,placeholder:e.label,"onUpdate:modelValue":t=>n.fieldValues[e.name]=t},null,8,qe)),[[a.YZ,n.fieldValues[e.name]]])])))),128)),(0,i._)("button",{class:"btn",type:"submit",textContent:(0,I.zw)(s.buttonText)},null,8,Le)],32)])),_:1})}var Ne={components:{Container:P},data(){return{fieldValues:{},cooldown:!1}},methods:{submitForm(){this.cooldown||(this.$emit("form-submitted",this.fieldValues),this.cooldown=!0,setTimeout((()=>{this.cooldown=!1}),1e3))}},name:"custom-form",props:{buttonText:{type:String,default:"Submit"},titleText:{type:String,default:"Title"},fields:Array}};const Ze=(0,j.Z)(Ne,[["render",Ee],["__scopeId","data-v-75607489"]]);var Be=Ze,Ye={data(){return{fields:[{name:"username",type:"text",label:"Username"},{name:"password",type:"password",label:"Password"}],buttonText:"Log in!",titleText:"Login",showMessage:!1,message:""}},components:{FormComponent:Be,Message:E},methods:{async handleSubmit(e){this.showMessage=!1;const t=Object.assign({},e);try{if(!t.username||!t.password)return this.showMessage=!0,void(this.message="Error: Please fill all the mandatory fields.");const e=await fetch("/api/auth/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});let a;if(this.showMessage=!0,!e.ok){if(404===e.status)try{if(a=await e.json(),"UsernameNotFound"===a.error)return void(this.message="Error: Could not find that username.")}catch(s){return void(this.message="Error: Could not find the server.")}return a=await e.json(),"IncorrectPasswordError"===a.error?void(this.message="Error: The credentials are not correct!"):void(this.message="Error: Unidentified error.")}a=await e.json(),this.$store.commit("authenticate"),this.$store.commit("setUsername",{username:t.username}),this.$router.push({path:"/"})}catch(a){console.log(a)}}}};const He=(0,j.Z)(Ye,[["render",Oe],["__scopeId","data-v-a7eceb06"]]);var Re=He;const Ve={id:"MessageGUI",class:"MessageGUI"},Ke={key:0},Ge={key:1},Je={key:0},Qe={key:1};function Xe(e,t,s,a,r,n){const o=(0,i.up)("message",!0),l=(0,i.up)("post");return(0,i.wg)(),(0,i.iD)("div",Ve,[r.noUsernameFound?((0,i.wg)(),(0,i.iD)("div",Ke,[(0,i.Wm)(o,{title:"Error: ",paragraphs:[n.noUsernameMessage]},null,8,["paragraphs"])])):((0,i.wg)(),(0,i.iD)("div",Ge,[r.noMessageFound?((0,i.wg)(),(0,i.iD)("div",Je,[(0,i.Wm)(o,{title:"Error: ",paragraphs:[n.messageNotFoundMessage]},null,8,["paragraphs"])])):((0,i.wg)(),(0,i.iD)("div",Qe,[(0,i.Wm)(o,{title:r.title},null,8,["title"]),(0,i.Wm)(l,{author:r.message.author,messageId:r.message.messageId,message:r.message.message,date:r.message.createdAt,nOfLikes:r.message.numberOfLikes,likedBefore:r.message.liked},null,8,["author","messageId","message","date","nOfLikes","likedBefore"])]))]))])}var et={name:"message-gui",components:{Message:E,Post:Se},data(){return{usernameUrl:"",messageIdUrl:"",title:"Message: ",noUsernameFound:!1,noMessageFound:!1,message:{}}},computed:{noUsernameMessage(){return"undefined"!==typeof this.usernameUrl&&""!==this.usernameUrl?"Couldn't find a user with the username "+this.usernameUrl+".":"You didn't enter a proper username!"},messageNotFoundMessage(){return"undefined"!==typeof this.messageIdUrl&&""!==this.messageIdUrl?"Couldn't find the message"+this.messageIdUrl+"with the username "+this.usernameUrl+".":"You didn't enter a proper message!"}},created(){if((("undefined"===typeof this.usernameUrl||""===this.usernameUrl)&&"undefined"!==typeof this.$route.params.user||("undefined"===typeof this.messageIdUrl||""===this.messageIdUrl)&&"undefined"!==typeof this.$route.params.messageId)&&(this.usernameUrl=this.$route.params.user,this.usernameUrl=this.usernameUrl.replace(/[^-_.a-zA-Z0-9]/g,""),this.messageIdUrl=this.$route.params.messageId,this.messageIdUrl=this.messageIdUrl.replace(/[^-_.a-zA-Z0-9]/g,""),this.usernameUrl!==this.$route.params.username||this.messageIdUrl!==this.$route.params.messageId)){const e="/message/"+this.usernameUrl+"/"+this.messageIdUrl;this.$router.push({path:e})}this.$watch((()=>this.$route),((e,t)=>{if(this.usernameUrl=this.$route.params.user,this.usernameUrl=this.usernameUrl.replace(/[^-_.a-zA-Z0-9]/g,""),this.messageIdUrl=this.$route.params.messageId,this.messageIdUrl=this.messageIdUrl.replace(/[^-_.a-zA-Z0-9]/g,""),this.usernameUrl!==this.$route.params.username||this.messageIdUrl!==this.$route.params.messageId){const e="/message/"+this.usernameUrl+"/"+this.messageIdUrl;this.$router.push({path:e})}}))},methods:{async retrieveMessage(){if(""===this.usernameUrl)return this.noUsernameFound=!0,void(this.message={});if(""===this.messageIdUrl)return this.noMessageFound=!0,void(this.message={});const e=await fetch("/api/social/messages/"+this.usernameUrl+"/"+this.messageIdUrl),t=await e.json();if(e.ok)this.noMessageFound=!1,this.noUsernameFound=!1,this.message=t;else if(404===e.status){if("undefined"===typeof t.error)return void(this.noMessageFound=!0);"MessageNotFound"===t.error&&(this.noMessageFound=!0),"UsernameNotFound"===t.error&&(this.noUsernameFound=!0)}}},watch:{usernameUrl:{immediate:!1,handler(e){this.retrieveMessage()}},messageIdUrl:{immediate:!1,handler(e){this.retrieveMessage()}}}};const tt=(0,j.Z)(et,[["render",Xe],["__scopeId","data-v-335900af"]]);var st=tt;function at(e,t,s,a,r,n){return null}var rt={data(){}};const nt=(0,j.Z)(rt,[["render",at]]);var it=nt;const ot={id:"NotFound",class:"NotFound"};function lt(e,t,s,a,r,n){const o=(0,i.up)("message");return(0,i.wg)(),(0,i.iD)("div",ot,[(0,i.Wm)(o,{title:r.title,paragraphs:r.paragraphs},null,8,["title","paragraphs"])])}var ut={data(){return{title:"Sorry!",paragraphs:["We couldn't find the page you were looking for.","If you believe this to be an error, contact Michele Scomina."]}},name:"NotFound",components:{Message:E}};const ht=(0,j.Z)(ut,[["render",lt],["__scopeId","data-v-0d620a56"]]);var dt=ht;const mt={id:"Register",class:"Register"};function ct(e,t,s,a,r,n){const o=(0,i.up)("form-component"),l=(0,i.up)("message");return(0,i.wg)(),(0,i.iD)("div",mt,[(0,i.Wm)(o,{class:"form",fields:r.fields,onFormSubmitted:n.handleSubmit,buttonText:r.buttonText,titleText:r.titleText},null,8,["fields","onFormSubmitted","buttonText","titleText"]),r.showMessage?((0,i.wg)(),(0,i.j4)(l,{key:0,class:"message",paragraphs:[r.message]},null,8,["paragraphs"])):(0,i.kq)("",!0),(0,i.Wm)(l,{class:"message",paragraphs:r.serverMessage},null,8,["paragraphs"])])}var pt={data(){return{fields:[{name:"username",type:"text",label:"Username (5-20 characters)"},{name:"name",type:"text",label:"Name (2-20 characters)"},{name:"surname",type:"text",label:"Surname (2-20 characters)"},{name:"description",type:"text",label:"Write a short description about yourself... (max 300 characters, optional)",isParagraph:!0},{name:"password",type:"password",label:"Password"}],buttonText:"Register!",titleText:"Register a new user:",showMessage:!1,message:"",serverMessage:["Please note that the name and the surname may only have letters and spaces as inputs.",' Also, the username must be unique and may only be composed by letters, numbers and the following characters: "- _ ."']}},components:{FormComponent:Be,Message:E,Post:Se},methods:{async handleSubmit(e){this.showMessage=!1;const t=Object.assign({},e);try{if(!t.username||!t.name||!t.surname||!t.password)return this.showMessage=!0,void(this.message="Error: Please fill all the mandatory fields.");t.description||(t.description="");const e=await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});let s;if(this.showMessage=!0,!e.ok)return 404===e.status?void(this.message="Error: Could not find the server."):(s=await e.json(),"ValidationError"===s.error?void(this.message="Error: Please make sure your fields respect the given format."):"UsernameAlreadyTaken"===s.error?void(this.message="Error: This username has already been taken!"):"InternalServerError"===s.error?void(this.message="Error: Internal server error."):void(this.message="Error: Unidentified error."));s=await e.json(),this.message=s.message}catch(s){console.log(s)}}}};const gt=(0,j.Z)(pt,[["render",ct],["__scopeId","data-v-e3c6a318"]]);var ft=gt;const wt={id:"Search",class:"Search"},vt={key:0},jt={key:1};function yt(e,t,s,a,r,n){const o=(0,i.up)("message"),l=(0,i.up)("user");return(0,i.wg)(),(0,i.iD)("div",wt,[(0,i.Wm)(o,{title:r.title},null,8,["title"]),n.hasResults?((0,i.wg)(),(0,i.iD)("div",jt,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.results,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e.username},[(0,i.Wm)(l,{class:"user",user:e,followingBefore:e.isFollowing},null,8,["user","followingBefore"])])))),128))])):((0,i.wg)(),(0,i.iD)("div",vt,[(0,i.Wm)(o,{paragraphs:[r.noResultsMessage]},null,8,["paragraphs"])]))])}var kt={data(){return{searchString:"",results:[],title:"Results: ",noResultsMessage:"No results matched your query!"}},components:{Message:E,User:te},computed:{hasResults(){return 0!==this.results.length}},created(){if(("undefined"===typeof this.searchString||""===this.searchString)&&"undefined"!==typeof this.$route.params.query&&(this.searchString=this.$route.params.query,this.searchString=this.searchString.replace(/[^-_.a-zA-Z0-9]/g,""),this.searchString!==this.$route.params.query)){const e="/search/"+this.searchString;this.$router.push({path:e})}this.$watch((()=>this.$route),((e,t)=>{if(this.searchString=this.$route.params.query,this.searchString=this.searchString.replace(/[^-_.a-zA-Z0-9]/g,""),this.searchString!==this.$route.params.query){const e="/search/"+this.searchString;this.$router.push({path:e})}}))},methods:{async search(){if(""===this.searchString)return void(this.results=[]);const e=await fetch("/api/social/search?q="+this.searchString);if(e.ok){const t=await e.json();this.results=t.users}else this.results=[]},formatUser(e){const{isFollowing:t,...s}=e;return s}},watch:{searchString:{immediate:!0,handler(e){this.search()}}}};const bt=(0,j.Z)(kt,[["render",yt],["__scopeId","data-v-77d915bf"]]);var Ut=bt;const _t={id:"UserProfile",class:"UserProfile"},xt={key:0},Ct={key:1},It={key:0},Ft={key:1};function Mt(e,t,s,a,r,n){const o=(0,i.up)("message"),l=(0,i.up)("user"),u=(0,i.up)("post");return(0,i.wg)(),(0,i.iD)("div",_t,[r.noUsernameFound?((0,i.wg)(),(0,i.iD)("div",xt,[(0,i.Wm)(o,{title:"Error: ",paragraphs:[n.noUsernameMessage]},null,8,["paragraphs"])])):((0,i.wg)(),(0,i.iD)("div",Ct,[(0,i.Wm)(o,{title:r.titles[0]},null,8,["title"]),(0,i.Wm)(l,{user:r.user,followingBefore:r.user.isFollowing},null,8,["user","followingBefore"]),(0,i.Wm)(o,{title:r.titles[1]},null,8,["title"]),n.hasMessages?((0,i.wg)(),(0,i.iD)("div",Ft,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.messages,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e.messageId},[(0,i.Wm)(u,{author:r.user,messageId:e.messageId,message:e.message,date:e.createdAt,nOfLikes:e.numberOfLikes,likedBefore:e.liked},null,8,["author","messageId","message","date","nOfLikes","likedBefore"])])))),128))])):((0,i.wg)(),(0,i.iD)("div",It,[(0,i.Wm)(o,{paragraphs:[n.noWrittenPosts]},null,8,["paragraphs"])]))]))])}var Dt={name:"user-profile",components:{Message:E,Post:Se,User:te},data(){return{usernameUrl:"",user:{},messages:[],titles:["User: ","Messages: "],noUsernameFound:!1}},computed:{noUsernameMessage(){return"undefined"!==typeof this.usernameUrl&&""!==this.usernameUrl?"Couldn't find a user with the username "+this.usernameUrl+".":"You didn't enter a proper username!"},noWrittenPosts(){return"The user @"+this.usernameUrl+" never wrote any messages!"},hasMessages(){return 0!==this.messages.length}},created(){if(("undefined"===typeof this.usernameUrl||""===this.usernameUrl)&&"undefined"!==typeof this.$route.params.username&&(this.usernameUrl=this.$route.params.username,this.usernameUrl=this.usernameUrl.replace(/[^-_.a-zA-Z0-9]/g,""),this.usernameUrl!==this.$route.params.username)){const e="/user/"+this.usernameUrl;this.$router.push({path:e})}this.$watch((()=>this.$route),((e,t)=>{if(this.usernameUrl=this.$route.params.username,this.usernameUrl=this.usernameUrl.replace(/[^-_.a-zA-Z0-9]/g,""),this.usernameUrl!==this.$route.params.username){const e="/user/"+this.usernameUrl;this.$router.push({path:e})}}))},methods:{async retrieveDataAndMessages(){await this.retrieveUser(),await this.retrieveMessages()},async retrieveUser(){if(""===this.usernameUrl)return this.noUsernameFound=!0,void(this.user={});const e=await fetch("/api/social/users/"+this.usernameUrl);if(e.ok){this.noUsernameFound=!1;const t=await e.json();this.user=t}else this.noUsernameFound=!0},async retrieveMessages(){if(""===this.usernameUrl)return void(this.messages=[]);const e=await fetch("/api/social/messages/"+this.usernameUrl);if(e.ok){const t=await e.json();this.messages=t.messages}else this.messages=[]}},watch:{usernameUrl:{immediate:!1,handler(e){this.retrieveDataAndMessages()}}}};const St=(0,j.Z)(Dt,[["render",Mt],["__scopeId","data-v-5cdebb04"]]);var Tt=St;const $t=[{path:"/login/",view:Re,title:"Login"},{path:"/write/",view:it,title:"New message"},{path:"/register/",view:ft,title:"Register"},{path:"/search/",view:Ut,title:"Search"},{path:"/user/",view:Tt,title:"User"},{path:"/message/",view:st,title:"Message"},{path:"/follows/",view:re,title:"Follows"}];var At={data(){return{currentPath:window.location.pathname+"/"}},computed:{currentView(){let e;if("//"===this.currentPath)return document.title="Homepage",Ae;for(let t=0;t<$t.length;t++){const s=$t[t];this.currentPath.startsWith(s.path)&&(e=s["view"],document.title=s.title)}return"undefined"===typeof e?(document.title="Not Found",dt):e}},components:{navbar:k},watch:{$route(e){let t=!1;if(this.currentPath=e.path+"/","//"!==this.currentPath){for(let e=0;e<$t.length;e++){const s=$t[e];this.currentPath.startsWith(s.path)&&(document.title=s.title,t=!0)}t||(document.title="Not Found")}else document.title="Homepage"}},created(){let e=!1;"//"===this.currentPath&&(document.title="Homepage",e=!0);for(let t=0;t<$t.length;t++){const s=$t[t];this.currentPath.startsWith(s.path)&&(document.title=s.title,e=!0)}e||(document.title="Not Found")}};const zt=(0,j.Z)(At,[["render",l]]);var Ot=zt,Wt=s(3494),Pt=s(7749),qt=s(8539);Wt.vI.add(qt.u8Q),Wt.vI.add(qt.qmU);const Lt=[{path:"/",component:Ae,meta:{requiresAuth:!1}},{path:"/login",component:Re,meta:{requiresAuth:!1}},{path:"/write",component:it,meta:{requiresAuth:!0}},{path:"/register",component:ft,meta:{requiresAuth:!1}},{path:"/search/:query",component:Ut,meta:{requiresAuth:!1}},{path:"/user/:username",component:Tt,meta:{requiresAuth:!1}},{path:"/follows",component:re,meta:{requiresAuth:!0}},{path:"/message/:user/:messageId",component:st,meta:{requiresAuth:!1}}],Et=(0,n.MT)({state(){return{isAuthenticated:!1,username:""}},mutations:{authenticate(e){e.isAuthenticated=!0},setUsername(e,t){e.username=t.username}},actions:{async fetchAuthentication({commit:e}){const t=await fetch("/api/social/whoami");if(t.ok){const s=await t.json();e("authenticate"),e("setUsername",{username:s.username})}}}});Et.dispatch("fetchAuthentication");const Nt=(0,r.p7)({history:(0,r.PO)(),routes:Lt});setTimeout((()=>{Nt.beforeEach(((e,t,s)=>{e.matched.some((e=>e.meta.requiresAuth))?Et.state.isAuthenticated?s():s({path:"/login"}):s()}));const e=(0,a.ri)(Ot);e.use(Nt),e.use(Et),e.component("font-awesome-icon",Pt.GN),e.mount("#app")}),250)}},t={};function s(a){var r=t[a];if(void 0!==r)return r.exports;var n=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(n.exports,n,n.exports,s),n.loaded=!0,n.exports}s.m=e,function(){var e=[];s.O=function(t,a,r,n){if(!a){var i=1/0;for(h=0;h<e.length;h++){a=e[h][0],r=e[h][1],n=e[h][2];for(var o=!0,l=0;l<a.length;l++)(!1&n||i>=n)&&Object.keys(s.O).every((function(e){return s.O[e](a[l])}))?a.splice(l--,1):(o=!1,n<i&&(i=n));if(o){e.splice(h--,1);var u=r();void 0!==u&&(t=u)}}return t}n=n||0;for(var h=e.length;h>0&&e[h-1][2]>n;h--)e[h]=e[h-1];e[h]=[a,r,n]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,a){var r,n,i=a[0],o=a[1],l=a[2],u=0;if(i.some((function(t){return 0!==e[t]}))){for(r in o)s.o(o,r)&&(s.m[r]=o[r]);if(l)var h=l(s)}for(t&&t(a);u<i.length;u++)n=i[u],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(h)},a=self["webpackChunkpublic"]=self["webpackChunkpublic"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(754)}));a=s.O(a)})();
//# sourceMappingURL=app.bc937b6f.js.map