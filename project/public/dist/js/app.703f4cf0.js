(function(){var e={6700:function(e,t,s){var n={"./af":3906,"./af.js":3906,"./ar":902,"./ar-dz":3853,"./ar-dz.js":3853,"./ar-kw":299,"./ar-kw.js":299,"./ar-ly":6825,"./ar-ly.js":6825,"./ar-ma":6379,"./ar-ma.js":6379,"./ar-sa":7700,"./ar-sa.js":7700,"./ar-tn":2059,"./ar-tn.js":2059,"./ar.js":902,"./az":6043,"./az.js":6043,"./be":7936,"./be.js":7936,"./bg":4078,"./bg.js":4078,"./bm":4014,"./bm.js":4014,"./bn":9554,"./bn-bd":7114,"./bn-bd.js":7114,"./bn.js":9554,"./bo":6529,"./bo.js":6529,"./br":5437,"./br.js":5437,"./bs":9647,"./bs.js":9647,"./ca":9951,"./ca.js":9951,"./cs":6113,"./cs.js":6113,"./cv":7965,"./cv.js":7965,"./cy":5858,"./cy.js":5858,"./da":3515,"./da.js":3515,"./de":2831,"./de-at":6263,"./de-at.js":6263,"./de-ch":1127,"./de-ch.js":1127,"./de.js":2831,"./dv":4510,"./dv.js":4510,"./el":8616,"./el.js":8616,"./en-au":4595,"./en-au.js":4595,"./en-ca":3545,"./en-ca.js":3545,"./en-gb":9609,"./en-gb.js":9609,"./en-ie":3727,"./en-ie.js":3727,"./en-il":3302,"./en-il.js":3302,"./en-in":6305,"./en-in.js":6305,"./en-nz":9128,"./en-nz.js":9128,"./en-sg":4569,"./en-sg.js":4569,"./eo":650,"./eo.js":650,"./es":6358,"./es-do":4214,"./es-do.js":4214,"./es-mx":8639,"./es-mx.js":8639,"./es-us":232,"./es-us.js":232,"./es.js":6358,"./et":7279,"./et.js":7279,"./eu":5515,"./eu.js":5515,"./fa":7981,"./fa.js":7981,"./fi":7090,"./fi.js":7090,"./fil":9208,"./fil.js":9208,"./fo":2799,"./fo.js":2799,"./fr":3463,"./fr-ca":2213,"./fr-ca.js":2213,"./fr-ch":2848,"./fr-ch.js":2848,"./fr.js":3463,"./fy":1468,"./fy.js":1468,"./ga":8163,"./ga.js":8163,"./gd":2898,"./gd.js":2898,"./gl":6312,"./gl.js":6312,"./gom-deva":682,"./gom-deva.js":682,"./gom-latn":9178,"./gom-latn.js":9178,"./gu":5009,"./gu.js":5009,"./he":2795,"./he.js":2795,"./hi":7009,"./hi.js":7009,"./hr":6506,"./hr.js":6506,"./hu":9565,"./hu.js":9565,"./hy-am":3864,"./hy-am.js":3864,"./id":5626,"./id.js":5626,"./is":6649,"./is.js":6649,"./it":151,"./it-ch":5348,"./it-ch.js":5348,"./it.js":151,"./ja":9830,"./ja.js":9830,"./jv":3751,"./jv.js":3751,"./ka":3365,"./ka.js":3365,"./kk":5980,"./kk.js":5980,"./km":9571,"./km.js":9571,"./kn":5880,"./kn.js":5880,"./ko":6809,"./ko.js":6809,"./ku":6773,"./ku.js":6773,"./ky":5505,"./ky.js":5505,"./lb":553,"./lb.js":553,"./lo":1237,"./lo.js":1237,"./lt":1563,"./lt.js":1563,"./lv":1057,"./lv.js":1057,"./me":6495,"./me.js":6495,"./mi":3096,"./mi.js":3096,"./mk":3874,"./mk.js":3874,"./ml":6055,"./ml.js":6055,"./mn":7747,"./mn.js":7747,"./mr":7113,"./mr.js":7113,"./ms":8687,"./ms-my":7948,"./ms-my.js":7948,"./ms.js":8687,"./mt":4532,"./mt.js":4532,"./my":4655,"./my.js":4655,"./nb":6961,"./nb.js":6961,"./ne":2512,"./ne.js":2512,"./nl":8448,"./nl-be":2936,"./nl-be.js":2936,"./nl.js":8448,"./nn":9031,"./nn.js":9031,"./oc-lnc":5174,"./oc-lnc.js":5174,"./pa-in":118,"./pa-in.js":118,"./pl":3448,"./pl.js":3448,"./pt":3518,"./pt-br":2447,"./pt-br.js":2447,"./pt.js":3518,"./ro":817,"./ro.js":817,"./ru":262,"./ru.js":262,"./sd":8990,"./sd.js":8990,"./se":3842,"./se.js":3842,"./si":7711,"./si.js":7711,"./sk":756,"./sk.js":756,"./sl":3772,"./sl.js":3772,"./sq":6187,"./sq.js":6187,"./sr":732,"./sr-cyrl":5713,"./sr-cyrl.js":5713,"./sr.js":732,"./ss":9455,"./ss.js":9455,"./sv":9770,"./sv.js":9770,"./sw":959,"./sw.js":959,"./ta":6459,"./ta.js":6459,"./te":5302,"./te.js":5302,"./tet":7975,"./tet.js":7975,"./tg":1294,"./tg.js":1294,"./th":2385,"./th.js":2385,"./tk":4613,"./tk.js":4613,"./tl-ph":8668,"./tl-ph.js":8668,"./tlh":8190,"./tlh.js":8190,"./tr":4506,"./tr.js":4506,"./tzl":3440,"./tzl.js":3440,"./tzm":9852,"./tzm-latn":2350,"./tzm-latn.js":2350,"./tzm.js":9852,"./ug-cn":730,"./ug-cn.js":730,"./uk":99,"./uk.js":99,"./ur":2100,"./ur.js":2100,"./uz":6002,"./uz-latn":6322,"./uz-latn.js":6322,"./uz.js":6002,"./vi":4207,"./vi.js":4207,"./x-pseudo":4674,"./x-pseudo.js":4674,"./yo":570,"./yo.js":570,"./zh-cn":3644,"./zh-cn.js":3644,"./zh-hk":2591,"./zh-hk.js":2591,"./zh-mo":9503,"./zh-mo.js":9503,"./zh-tw":8080,"./zh-tw.js":8080};function a(e){var t=o(e);return s(t)}function o(e){if(!s.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=o,e.exports=a,a.id=6700},1169:function(e,t,s){"use strict";var n=s(9242),a=s(2483),o=s(65),r=s(3396);const i={class:"app",id:"app"};function l(e,t,s,n,a,o){const l=(0,r.up)("navbar");return(0,r.wg)(),(0,r.iD)("div",i,[((0,r.wg)(),(0,r.j4)((0,r.LL)(o.currentView),{class:"view"})),(0,r.Wm)(l)])}const u=e=>((0,r.dD)("data-v-54331008"),e=e(),(0,r.Cn)(),e),c={id:"navbar",class:"container"},d={class:"navbar"},m={class:"nav-left"},h={class:"nav-center"},p=u((()=>(0,r._)("input",{type:"text",id:"search",class:"search-input",placeholder:"Search user..."},null,-1))),f={class:"nav-right"};function g(e,t,s,a,o,i){const l=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("div",c,[(0,r._)("nav",d,[(0,r._)("div",m,[(0,r.Wm)(l,{to:"/",class:"nav-button"},{default:(0,r.w5)((()=>[(0,r.Uk)("Home")])),_:1})]),(0,r._)("div",h,[(0,r._)("form",{onSubmit:t[0]||(t[0]=(0,n.iM)(((...e)=>i.search&&i.search(...e)),["prevent"]))},[p,(0,r.Wm)(l,{to:"/search",class:"nav-button search-button"},{default:(0,r.w5)((()=>[(0,r.Uk)("Search")])),_:1})],32)]),(0,r._)("div",f,[this.isAuthenticated?((0,r.wg)(),(0,r.iD)(r.HY,{key:1},[(0,r.Wm)(l,{to:"/write",class:"nav-button"},{default:(0,r.w5)((()=>[(0,r.Uk)("Post")])),_:1}),(0,r.Wm)(l,{to:"/follows",class:"nav-button"},{default:(0,r.w5)((()=>[(0,r.Uk)("Follows")])),_:1})],64)):((0,r.wg)(),(0,r.iD)(r.HY,{key:0},[(0,r.Wm)(l,{to:"/login",class:"nav-button"},{default:(0,r.w5)((()=>[(0,r.Uk)("Login")])),_:1}),(0,r.Wm)(l,{to:"/register",class:"nav-button"},{default:(0,r.w5)((()=>[(0,r.Uk)("Register")])),_:1})],64))])])])}var w={name:"Navbar",computed:{isAuthenticated(){return this.$store.state.isAuthenticated}},methods:{search(){console.log(`Searching for ${this.searchTerm}`)}}},v=s(89);const j=(0,v.Z)(w,[["render",g],["__scopeId","data-v-54331008"]]);var b=j;const k={id:"Follow",class:"Follow"},y={key:0},_={key:0},x={key:1};function C(e,t,s,n,a,o){const i=(0,r.up)("message"),l=(0,r.up)("user");return(0,r.wg)(),(0,r.iD)("div",k,[o.isAuthenticated?((0,r.wg)(),(0,r.iD)("div",y,[(0,r.Wm)(i,{title:a.title},null,8,["title"]),o.isFollowing?((0,r.wg)(),(0,r.iD)("div",x,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.following,(e=>((0,r.wg)(),(0,r.iD)("div",{key:e.username},[(0,r.Wm)(l,{user:e,followingBefore:!0},null,8,["user"])])))),128))])):((0,r.wg)(),(0,r.iD)("div",_,[(0,r.Wm)(i,{paragraphs:[a.noFollowingMessage]},null,8,["paragraphs"])]))])):(0,r.kq)("",!0)])}var T=s(7139);const D={class:"title"},F=["textContent"],A={class:"text"},z=["textContent"];function S(e,t,s,n,a,o){const i=(0,r.up)("container");return(0,r.wg)(),(0,r.j4)(i,null,{default:(0,r.w5)((()=>[(0,r._)("div",D,[s.title?((0,r.wg)(),(0,r.iD)("h1",{key:0,textContent:(0,T.zw)(s.title)},null,8,F)):(0,r.kq)("",!0)]),(0,r._)("div",A,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(s.paragraphs,((e,t)=>((0,r.wg)(),(0,r.iD)("p",{key:t,textContent:(0,T.zw)(e)},null,8,z)))),128))])])),_:1})}const U={id:"container",class:"container"},O={id:"content",class:"content"};function M(e,t){return(0,r.wg)(),(0,r.iD)("div",U,[(0,r._)("div",O,[(0,r.WI)(e.$slots,"default",{},void 0,!0)])])}const I={},P=(0,v.Z)(I,[["render",M],["__scopeId","data-v-b1d2b4ee"]]);var W=P,E={components:{Container:W},name:"message",props:{title:{type:String,default:""},paragraphs:{type:Array,default:[]}}};const L=(0,v.Z)(E,[["render",S],["__scopeId","data-v-5bdf9b45"]]);var N=L;const q=e=>((0,r.dD)("data-v-1d854a0c"),e=e(),(0,r.Cn)(),e),Z={id:"user-data",class:"upper-box"},$={class:"user-info"},H=["textContent"],Y=["textContent"],V=["textContent"],B=q((()=>(0,r._)("div",{class:"description"},[(0,r._)("b",null,"Description:")],-1))),R=["textContent"];function K(e,t,s,n,a,o){const i=(0,r.up)("font-awesome-icon"),l=(0,r.up)("container");return(0,r.wg)(),(0,r.j4)(l,{class:"container"},{default:(0,r.w5)((()=>[(0,r._)("div",Z,[(0,r._)("div",$,[(0,r._)("div",{textContent:(0,T.zw)(o.userInfo.username)},null,8,H),(0,r._)("div",{textContent:(0,T.zw)(o.userInfo.name)},null,8,Y),(0,r._)("div",{textContent:(0,T.zw)(o.userInfo.surname)},null,8,V)]),o.isAuthenticated?((0,r.wg)(),(0,r.j4)(i,{key:0,icon:["fas","bell"],class:(0,T.C_)({follow:o.isFollowing}),onClick:o.followUser},null,8,["class","onClick"])):(0,r.kq)("",!0)]),B,(0,r._)("div",{id:"description",textContent:(0,T.zw)(s.user.description)},null,8,R)])),_:1})}var J={name:"user-data",components:{Container:W},data(){return{following:!1,followCooldown:!1}},props:{followingBefore:{type:Boolean,default:!1},user:{type:Object,default:function(){return{username:"Username",name:"Nome",surname:"Cognome",description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."}}}},computed:{isFollowing(){return this.following!==this.followingBefore},userInfo(){return{username:"Username: @"+this.user.username,name:"Name: "+this.user.name,surname:"Surname: "+this.user.surname}},isAuthenticated(){return this.$store.state.isAuthenticated}},methods:{async followUser(){if(this.followCooldown||!this.$store.state.isAuthenticated)return;const e="/api/social/followers/"+this.user.username,t=this.following!==this.followingBefore?"DELETE":"POST";fetch(e,{method:t});this.following=!this.following,this.followCooldown=!0,setTimeout((()=>{this.followCooldown=!1}),1e3)}}};const G=(0,v.Z)(J,[["render",K],["__scopeId","data-v-1d854a0c"]]);var Q=G,X={name:"Follow",components:{Message:N,User:Q},data(){return{title:"Following: ",noFollowingMessage:"You aren't following anyone at the moment!",following:[]}},computed:{isAuthenticated(){return this.$store.state.isAuthenticated},isFollowing(){return 0!==this.following.length}},methods:{async retrieveFollows(){const e=await fetch("/api/social/followers/"+this.$store.state.username);if(e.ok){const t=await e.json();this.following=t.following}}},watch:{"$store.state.isAuthenticated":{immediate:!0,handler(e){e&&this.retrieveFollows()}}}};const ee=(0,v.Z)(X,[["render",C],["__scopeId","data-v-094a9f82"]]);var te=ee;const se={id:"Home",class:"Home"},ne={key:1},ae={key:0},oe={key:1};function re(e,t,s,n,a,o){const i=(0,r.up)("message"),l=(0,r.up)("post");return(0,r.wg)(),(0,r.iD)("div",se,[o.isAuthenticated?((0,r.wg)(),(0,r.iD)("div",ne,[o.feedsExist?((0,r.wg)(),(0,r.iD)("div",oe,[(0,r.Wm)(i,{title:a.titleFeed,class:"feed"},null,8,["title"]),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.feeds,(e=>((0,r.wg)(),(0,r.iD)("div",{key:e.messageId},[(0,r.Wm)(l,{messageId:e.messageId,author:e.author,message:e.message,date:e.createdAt,nOfLikes:e.numberOfLikes,likedBefore:e.liked},null,8,["messageId","author","message","date","nOfLikes","likedBefore"])])))),128))])):((0,r.wg)(),(0,r.iD)("div",ae,[(0,r.Wm)(i,{title:a.titleNoFeed,paragraphs:[a.paragraphsNoFeed]},null,8,["title","paragraphs"])]))])):((0,r.wg)(),(0,r.j4)(i,{key:0,title:a.titleUnauth,paragraphs:a.paragraphsUnauth},null,8,["title","paragraphs"]))])}const ie=e=>((0,r.dD)("data-v-38397050"),e=e(),(0,r.Cn)(),e),le={class:"author"},ue={class:"username"},ce=["textContent"],de={class:"info"},me=["textContent"],he=ie((()=>(0,r._)("div",{class:"break"},null,-1))),pe={class:"message"},fe=["textContent"],ge=ie((()=>(0,r._)("div",{class:"break"},null,-1))),we={class:"bottom"},ve={class:"time"},je=["textContent"],be=ie((()=>(0,r._)("div",{class:"break"},null,-1))),ke={class:"likes"},ye=["textContent"];function _e(e,t,s,n,a,o){const i=(0,r.up)("font-awesome-icon"),l=(0,r.up)("container");return(0,r.wg)(),(0,r.j4)(l,{class:"container"},{default:(0,r.w5)((()=>[(0,r._)("div",le,[(0,r._)("cite",ue,[(0,r._)("span",{class:"span-username",textContent:(0,T.zw)(o.formatUsername),onClick:t[0]||(t[0]=(...e)=>o.userRoute&&o.userRoute(...e))},null,8,ce)]),(0,r._)("cite",de,[(0,r._)("span",{class:"span-info",textContent:(0,T.zw)(o.nameAndSurname)},null,8,me)])]),he,(0,r._)("div",pe,[(0,r._)("p",{textContent:(0,T.zw)(s.message)},null,8,fe)]),ge,(0,r._)("div",we,[(0,r._)("div",ve,[(0,r._)("p",{textContent:(0,T.zw)(o.formattedDate)},null,8,je)]),be,(0,r._)("div",ke,[(0,r._)("p",{class:"nOfLikes",textContent:(0,T.zw)(o.numberOfLikes)},null,8,ye),(0,r.Wm)(i,{icon:["fas","thumbs-up"],class:(0,T.C_)({liked:o.isLiked,"like-clickable":o.isAuthenticated}),onClick:o.like},null,8,["class","onClick"])])])])),_:1})}s(7658);var xe=s(6797),Ce=s.n(xe),Te={name:"post",components:{Container:W},data(){return{liked:!1,likeCooldown:!1}},props:{messageId:{type:String,default:"00000000-0000-0000-0000-0000000000"},author:{type:Object,default:function(){return{username:"Username",name:"Nome",surname:"Cognome"}}},message:{type:String,default:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."},date:{type:String,default:"1970-01-01T00:00:00Z"},nOfLikes:{type:Number,default:0},likedBefore:{type:Boolean,default:!1}},computed:{nameAndSurname(){return this.author.name+" "+this.author.surname},formatUsername(){return"@"+this.author.username},numberOfLikes(){return!this.likedBefore&&this.liked?this.nOfLikes+1:this.likedBefore&&this.liked?this.nOfLikes-1:this.nOfLikes},isLiked(){return this.likedBefore!==this.liked},formattedDate(){return Ce()(this.date).format("MMM DD, YYYY HH:mm:ss")},isAuthenticated(){return this.$store.state.isAuthenticated}},methods:{async like(){if(this.likeCooldown||!this.$store.state.isAuthenticated)return;const e="/api/social/like/"+this.messageId,t=this.liked!==this.likedBefore?"DELETE":"POST";fetch(e,{method:t});this.liked=!this.liked,this.likeCooldown=!0,setTimeout((()=>{this.likeCooldown=!1}),1e3)},userRoute(){const e="/user/"+this.author.username;this.$router.push({path:e})}}};const De=(0,v.Z)(Te,[["render",_e],["__scopeId","data-v-38397050"]]);var Fe=De,Ae={name:"Home",data(){return{titleUnauth:"Welcome!",paragraphsUnauth:['This is a social network web page created by Michele Scomina for the course "Programmazione Web".',"You are currently in the home page.","This page has been built using the Vue.js framework.","You are not authenticated as of right now!"],feeds:[],titleNoFeed:"No feeds!",titleFeed:"Feeds:",paragraphsNoFeed:"You currently do not have any feeds! Start following someone to start getting feeds in your homepage!"}},computed:{isAuthenticated(){return this.$store.state.isAuthenticated},feedsExist(){return!(0===this.feeds.length)}},methods:{async retrieveFeed(){const e=await fetch("/api/social/feed");if(e.ok){const t=await e.json();this.feeds=t.messages}}},watch:{"$store.state.isAuthenticated":{immediate:!0,handler(e){e&&this.retrieveFeed()}}},components:{Message:N,Post:Fe}};const ze=(0,v.Z)(Ae,[["render",re],["__scopeId","data-v-0916c5c1"]]);var Se=ze;const Ue={id:"Login",class:"Login"};function Oe(e,t,s,n,a,o){const i=(0,r.up)("form-component"),l=(0,r.up)("message");return(0,r.wg)(),(0,r.iD)("div",Ue,[(0,r.Wm)(i,{class:"form",fields:a.fields,onFormSubmitted:o.handleSubmit,buttonText:a.buttonText,titleText:a.titleText},null,8,["fields","onFormSubmitted","buttonText","titleText"]),a.showMessage?((0,r.wg)(),(0,r.j4)(l,{key:0,class:"message",paragraphs:[a.message]},null,8,["paragraphs"])):(0,r.kq)("",!0)])}const Me=["textContent"],Ie=["type","placeholder","onUpdate:modelValue"],Pe=["type","placeholder","onUpdate:modelValue"],We=["textContent"];function Ee(e,t,s,a,o,i){const l=(0,r.up)("container");return(0,r.wg)(),(0,r.j4)(l,null,{default:(0,r.w5)((()=>[(0,r._)("form",{onSubmit:t[0]||(t[0]=(0,n.iM)(((...e)=>i.submitForm&&i.submitForm(...e)),["prevent"])),class:"form"},[(0,r._)("h1",{textContent:(0,T.zw)(s.titleText)},null,8,Me),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(s.fields,(e=>((0,r.wg)(),(0,r.iD)("div",{key:e.name},[e.isParagraph?(0,r.wy)(((0,r.wg)(),(0,r.iD)("textarea",{key:0,type:e.type,placeholder:e.label,"onUpdate:modelValue":t=>o.fieldValues[e.name]=t},null,8,Ie)),[[n.nr,o.fieldValues[e.name]]]):(0,r.wy)(((0,r.wg)(),(0,r.iD)("input",{key:1,type:e.type,placeholder:e.label,"onUpdate:modelValue":t=>o.fieldValues[e.name]=t},null,8,Pe)),[[n.YZ,o.fieldValues[e.name]]])])))),128)),(0,r._)("button",{class:"btn",type:"submit",textContent:(0,T.zw)(s.buttonText)},null,8,We)],32)])),_:1})}var Le={components:{Container:W},data(){return{fieldValues:{},cooldown:!1}},methods:{submitForm(){this.cooldown||(this.$emit("form-submitted",this.fieldValues),this.cooldown=!0,setTimeout((()=>{this.cooldown=!1}),1e3))}},name:"custom-form",props:{buttonText:{type:String,default:"Submit"},titleText:{type:String,default:"Title"},fields:Array}};const Ne=(0,v.Z)(Le,[["render",Ee],["__scopeId","data-v-4436d3f2"]]);var qe=Ne,Ze={data(){return{fields:[{name:"username",type:"text",label:"Username"},{name:"password",type:"password",label:"Password"}],buttonText:"Log in!",titleText:"Login",showMessage:!1,message:""}},components:{FormComponent:qe,Message:N},methods:{async handleSubmit(e){this.showMessage=!1;const t=Object.assign({},e);try{if(!t.username||!t.password)return this.showMessage=!0,void(this.message="Error: Please fill all the mandatory fields.");const e=await fetch("/api/auth/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});let n;if(this.showMessage=!0,!e.ok){if(404===e.status)try{if(n=await e.json(),"UsernameNotFound"===n.error)return void(this.message="Error: Could not find that username.")}catch(s){return void(this.message="Error: Could not find the server.")}return n=await e.json(),"IncorrectPasswordError"===n.error?void(this.message="Error: The credentials are not correct!"):void(this.message="Error: Unidentified error.")}n=await e.json(),this.$store.commit("authenticate"),this.$store.commit("setUsername",{username:t.username}),this.$router.push({path:"/"})}catch(n){console.log(n)}}}};const $e=(0,v.Z)(Ze,[["render",Oe],["__scopeId","data-v-a7eceb06"]]);var He=$e;function Ye(e,t,s,n,a,o){return null}var Ve={data(){}};const Be=(0,v.Z)(Ve,[["render",Ye]]);var Re=Be;function Ke(e,t,s,n,a,o){return null}var Je={data(){}};const Ge=(0,v.Z)(Je,[["render",Ke]]);var Qe=Ge;const Xe={id:"NotFound",class:"NotFound"};function et(e,t,s,n,a,o){const i=(0,r.up)("message");return(0,r.wg)(),(0,r.iD)("div",Xe,[(0,r.Wm)(i,{title:a.title,paragraphs:a.paragraphs},null,8,["title","paragraphs"])])}var tt={data(){return{title:"Sorry!",paragraphs:["We couldn't find the page you were looking for.","If you believe this to be an error, contact Michele Scomina."]}},name:"NotFound",components:{Message:N}};const st=(0,v.Z)(tt,[["render",et],["__scopeId","data-v-0d620a56"]]);var nt=st;const at={id:"Register",class:"Register"};function ot(e,t,s,n,a,o){const i=(0,r.up)("form-component"),l=(0,r.up)("message");return(0,r.wg)(),(0,r.iD)("div",at,[(0,r.Wm)(i,{class:"form",fields:a.fields,onFormSubmitted:o.handleSubmit,buttonText:a.buttonText,titleText:a.titleText},null,8,["fields","onFormSubmitted","buttonText","titleText"]),a.showMessage?((0,r.wg)(),(0,r.j4)(l,{key:0,class:"message",paragraphs:[a.message]},null,8,["paragraphs"])):(0,r.kq)("",!0),(0,r.Wm)(l,{class:"message",paragraphs:a.serverMessage},null,8,["paragraphs"])])}var rt={data(){return{fields:[{name:"username",type:"text",label:"Username (5-20 characters)"},{name:"name",type:"text",label:"Name (2-20 characters)"},{name:"surname",type:"text",label:"Surname (2-20 characters)"},{name:"description",type:"text",label:"Write a short description about yourself... (max 300 characters, optional)",isParagraph:!0},{name:"password",type:"password",label:"Password"}],buttonText:"Register!",titleText:"Register a new user:",showMessage:!1,message:"",serverMessage:["Please note that the name and the surname may only have letters and spaces as inputs.",' Also, the username must be unique and may only be composed by letters, numbers and the following characters: "- _ ."']}},components:{FormComponent:qe,Message:N},methods:{async handleSubmit(e){this.showMessage=!1;const t=Object.assign({},e);try{if(!t.username||!t.name||!t.surname||!t.password)return this.showMessage=!0,void(this.message="Error: Please fill all the mandatory fields.");t.description||(t.description="");const e=await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});let s;if(this.showMessage=!0,!e.ok)return 404===e.status?void(this.message="Error: Could not find the server."):(s=await e.json(),"ValidationError"===s.error?void(this.message="Error: Please make sure your fields respect the given format."):"UsernameAlreadyTaken"===s.error?void(this.message="Error: This username has already been taken!"):"InternalServerError"===s.error?void(this.message="Error: Internal server error."):void(this.message="Error: Unidentified error."));s=await e.json(),this.message=s.message}catch(s){console.log(s)}}}};const it=(0,v.Z)(rt,[["render",ot],["__scopeId","data-v-49837658"]]);var lt=it;const ut={id:"Search",class:"Search"};function ct(e,t,s,n,a,o){const i=(0,r.up)("user"),l=(0,r.up)("post");return(0,r.wg)(),(0,r.iD)("div",ut,[(0,r.Wm)(i),(0,r.Wm)(l)])}var dt={data(){return{data:0}},components:{User:Q,Post:Fe}};const mt=(0,v.Z)(dt,[["render",ct],["__scopeId","data-v-215202c4"]]);var ht=mt;function pt(e,t,s,n,a,o){return null}var ft={data(){}};const gt=(0,v.Z)(ft,[["render",pt]]);var wt=gt;const vt=[{path:"/login/",view:He,title:"Login"},{path:"/write/",view:Qe,title:"New message"},{path:"/register/",view:lt,title:"Register"},{path:"/search/",view:ht,title:"Search"},{path:"/user/",view:wt,title:"User"},{path:"/message/",view:Re,title:"Message"},{path:"/follows/",view:te,title:"Follows"}];var jt={data(){return{currentPath:window.location.pathname+"/"}},computed:{currentView(){let e;if("//"===this.currentPath)return document.title="Homepage",Se;for(let t=0;t<vt.length;t++){const s=vt[t];this.currentPath.startsWith(s.path)&&(e=s["view"],document.title=s.title)}return"undefined"===typeof e?(document.title="Not Found",nt):e}},components:{navbar:b},watch:{$route(e){let t=!1;if(this.currentPath=e.path+"/","//"!==this.currentPath){for(let e=0;e<vt.length;e++){const s=vt[e];this.currentPath.startsWith(s.path)&&(document.title=s.title,t=!0)}t||(document.title="Not Found")}else document.title="Homepage"}},async mounted(){let e=!1;"//"===this.currentPath&&(document.title="Homepage",e=!0);for(let t=0;t<vt.length;t++){const s=vt[t];this.currentPath.startsWith(s.path)&&(document.title=s.title,e=!0)}e||(document.title="Not Found")}};const bt=(0,v.Z)(jt,[["render",l]]);var kt=bt,yt=s(3494),_t=s(7749),xt=s(8539);yt.vI.add(xt.u8Q),yt.vI.add(xt.qmU);const Ct=[{path:"/",component:Se,meta:{requiresAuth:!1}},{path:"/login",component:He,meta:{requiresAuth:!1}},{path:"/write",component:Qe,meta:{requiresAuth:!0}},{path:"/register",component:lt,meta:{requiresAuth:!1}},{path:"/search",component:ht,meta:{requiresAuth:!1}},{path:"/user",component:wt,meta:{requiresAuth:!1}},{path:"/follows",component:te,meta:{requiresAuth:!0}}],Tt=(0,o.MT)({state(){return{isAuthenticated:!1,username:""}},mutations:{authenticate(e){e.isAuthenticated=!0},setUsername(e,t){e.username=t.username}},actions:{async fetchAuthentication({commit:e}){const t=await fetch("/api/social/whoami");if(t.ok){const s=await t.json();e("authenticate"),e("setUsername",{username:s.username})}}}});Tt.dispatch("fetchAuthentication");const Dt=(0,a.p7)({history:(0,a.PO)(),routes:Ct});setTimeout((()=>{Dt.beforeEach(((e,t,s)=>{e.matched.some((e=>e.meta.requiresAuth))?Tt.state.isAuthenticated?s():s({path:"/login"}):s()}));const e=(0,n.ri)(kt);e.use(Dt),e.use(Tt),e.component("font-awesome-icon",_t.GN),e.mount("#app")}),250)}},t={};function s(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(o.exports,o,o.exports,s),o.loaded=!0,o.exports}s.m=e,function(){var e=[];s.O=function(t,n,a,o){if(!n){var r=1/0;for(c=0;c<e.length;c++){n=e[c][0],a=e[c][1],o=e[c][2];for(var i=!0,l=0;l<n.length;l++)(!1&o||r>=o)&&Object.keys(s.O).every((function(e){return s.O[e](n[l])}))?n.splice(l--,1):(i=!1,o<r&&(r=o));if(i){e.splice(c--,1);var u=a();void 0!==u&&(t=u)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[n,a,o]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,n){var a,o,r=n[0],i=n[1],l=n[2],u=0;if(r.some((function(t){return 0!==e[t]}))){for(a in i)s.o(i,a)&&(s.m[a]=i[a]);if(l)var c=l(s)}for(t&&t(n);u<r.length;u++)o=r[u],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(c)},n=self["webpackChunkpublic"]=self["webpackChunkpublic"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=s.O(void 0,[998],(function(){return s(1169)}));n=s.O(n)})();
//# sourceMappingURL=app.703f4cf0.js.map