(function(){var e={6700:function(e,s,t){var a={"./af":3906,"./af.js":3906,"./ar":902,"./ar-dz":3853,"./ar-dz.js":3853,"./ar-kw":299,"./ar-kw.js":299,"./ar-ly":6825,"./ar-ly.js":6825,"./ar-ma":6379,"./ar-ma.js":6379,"./ar-sa":7700,"./ar-sa.js":7700,"./ar-tn":2059,"./ar-tn.js":2059,"./ar.js":902,"./az":6043,"./az.js":6043,"./be":7936,"./be.js":7936,"./bg":4078,"./bg.js":4078,"./bm":4014,"./bm.js":4014,"./bn":9554,"./bn-bd":7114,"./bn-bd.js":7114,"./bn.js":9554,"./bo":6529,"./bo.js":6529,"./br":5437,"./br.js":5437,"./bs":9647,"./bs.js":9647,"./ca":9951,"./ca.js":9951,"./cs":6113,"./cs.js":6113,"./cv":7965,"./cv.js":7965,"./cy":5858,"./cy.js":5858,"./da":3515,"./da.js":3515,"./de":2831,"./de-at":6263,"./de-at.js":6263,"./de-ch":1127,"./de-ch.js":1127,"./de.js":2831,"./dv":4510,"./dv.js":4510,"./el":8616,"./el.js":8616,"./en-au":4595,"./en-au.js":4595,"./en-ca":3545,"./en-ca.js":3545,"./en-gb":9609,"./en-gb.js":9609,"./en-ie":3727,"./en-ie.js":3727,"./en-il":3302,"./en-il.js":3302,"./en-in":6305,"./en-in.js":6305,"./en-nz":9128,"./en-nz.js":9128,"./en-sg":4569,"./en-sg.js":4569,"./eo":650,"./eo.js":650,"./es":6358,"./es-do":4214,"./es-do.js":4214,"./es-mx":8639,"./es-mx.js":8639,"./es-us":232,"./es-us.js":232,"./es.js":6358,"./et":7279,"./et.js":7279,"./eu":5515,"./eu.js":5515,"./fa":7981,"./fa.js":7981,"./fi":7090,"./fi.js":7090,"./fil":9208,"./fil.js":9208,"./fo":2799,"./fo.js":2799,"./fr":3463,"./fr-ca":2213,"./fr-ca.js":2213,"./fr-ch":2848,"./fr-ch.js":2848,"./fr.js":3463,"./fy":1468,"./fy.js":1468,"./ga":8163,"./ga.js":8163,"./gd":2898,"./gd.js":2898,"./gl":6312,"./gl.js":6312,"./gom-deva":682,"./gom-deva.js":682,"./gom-latn":9178,"./gom-latn.js":9178,"./gu":5009,"./gu.js":5009,"./he":2795,"./he.js":2795,"./hi":7009,"./hi.js":7009,"./hr":6506,"./hr.js":6506,"./hu":9565,"./hu.js":9565,"./hy-am":3864,"./hy-am.js":3864,"./id":5626,"./id.js":5626,"./is":6649,"./is.js":6649,"./it":151,"./it-ch":5348,"./it-ch.js":5348,"./it.js":151,"./ja":9830,"./ja.js":9830,"./jv":3751,"./jv.js":3751,"./ka":3365,"./ka.js":3365,"./kk":5980,"./kk.js":5980,"./km":9571,"./km.js":9571,"./kn":5880,"./kn.js":5880,"./ko":6809,"./ko.js":6809,"./ku":6773,"./ku.js":6773,"./ky":5505,"./ky.js":5505,"./lb":553,"./lb.js":553,"./lo":1237,"./lo.js":1237,"./lt":1563,"./lt.js":1563,"./lv":1057,"./lv.js":1057,"./me":6495,"./me.js":6495,"./mi":3096,"./mi.js":3096,"./mk":3874,"./mk.js":3874,"./ml":6055,"./ml.js":6055,"./mn":7747,"./mn.js":7747,"./mr":7113,"./mr.js":7113,"./ms":8687,"./ms-my":7948,"./ms-my.js":7948,"./ms.js":8687,"./mt":4532,"./mt.js":4532,"./my":4655,"./my.js":4655,"./nb":6961,"./nb.js":6961,"./ne":2512,"./ne.js":2512,"./nl":8448,"./nl-be":2936,"./nl-be.js":2936,"./nl.js":8448,"./nn":9031,"./nn.js":9031,"./oc-lnc":5174,"./oc-lnc.js":5174,"./pa-in":118,"./pa-in.js":118,"./pl":3448,"./pl.js":3448,"./pt":3518,"./pt-br":2447,"./pt-br.js":2447,"./pt.js":3518,"./ro":817,"./ro.js":817,"./ru":262,"./ru.js":262,"./sd":8990,"./sd.js":8990,"./se":3842,"./se.js":3842,"./si":7711,"./si.js":7711,"./sk":756,"./sk.js":756,"./sl":3772,"./sl.js":3772,"./sq":6187,"./sq.js":6187,"./sr":732,"./sr-cyrl":5713,"./sr-cyrl.js":5713,"./sr.js":732,"./ss":9455,"./ss.js":9455,"./sv":9770,"./sv.js":9770,"./sw":959,"./sw.js":959,"./ta":6459,"./ta.js":6459,"./te":5302,"./te.js":5302,"./tet":7975,"./tet.js":7975,"./tg":1294,"./tg.js":1294,"./th":2385,"./th.js":2385,"./tk":4613,"./tk.js":4613,"./tl-ph":8668,"./tl-ph.js":8668,"./tlh":8190,"./tlh.js":8190,"./tr":4506,"./tr.js":4506,"./tzl":3440,"./tzl.js":3440,"./tzm":9852,"./tzm-latn":2350,"./tzm-latn.js":2350,"./tzm.js":9852,"./ug-cn":730,"./ug-cn.js":730,"./uk":99,"./uk.js":99,"./ur":2100,"./ur.js":2100,"./uz":6002,"./uz-latn":6322,"./uz-latn.js":6322,"./uz.js":6002,"./vi":4207,"./vi.js":4207,"./x-pseudo":4674,"./x-pseudo.js":4674,"./yo":570,"./yo.js":570,"./zh-cn":3644,"./zh-cn.js":3644,"./zh-hk":2591,"./zh-hk.js":2591,"./zh-mo":9503,"./zh-mo.js":9503,"./zh-tw":8080,"./zh-tw.js":8080};function r(e){var s=n(e);return t(s)}function n(e){if(!t.o(a,e)){var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=n,e.exports=r,r.id=6700},272:function(e,s,t){"use strict";var a=t(9242),r=t(2483),n=t(65),o=t(3396);const i={class:"app",id:"app"};function u(e,s,t,a,r,n){const u=(0,o.up)("navbar");return(0,o.wg)(),(0,o.iD)("div",i,[((0,o.wg)(),(0,o.j4)((0,o.LL)(n.currentView),{class:"view"})),(0,o.Wm)(u)])}const l=e=>((0,o.dD)("data-v-303297fb"),e=e(),(0,o.Cn)(),e),h={id:"navbar",class:"container"},m={class:"navbar"},d={class:"nav-left"},c={key:0},g={class:"nav-center"},p=["placeholder"],f=l((()=>(0,o._)("button",{type:"submit",class:"nav-button search-button"},"Search",-1))),w={class:"nav-right"};function v(e,s,t,r,n,i){const u=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("div",h,[(0,o._)("nav",m,[(0,o._)("div",d,[(0,o.Wm)(u,{to:"/",class:"nav-button"},{default:(0,o.w5)((()=>[(0,o.Uk)("Home")])),_:1}),i.isAuthenticated?((0,o.wg)(),(0,o.iD)("div",c,[(0,o.Wm)(u,{to:i.pathToUsername,class:"nav-button"},{default:(0,o.w5)((()=>[(0,o.Uk)("Profile")])),_:1},8,["to"])])):(0,o.kq)("",!0)]),(0,o._)("div",g,[(0,o._)("form",{onSubmit:s[2]||(s[2]=(0,a.iM)(((...e)=>i.search&&i.search(...e)),["prevent"]))},[(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=e=>n.searchTerm=e),id:"search",class:"search-input",placeholder:n.placeholder,onInput:s[1]||(s[1]=(...e)=>i.checkChars&&i.checkChars(...e)),maxlength:"20"},null,40,p),[[a.nr,n.searchTerm]]),f],32)]),(0,o._)("div",w,[this.isAuthenticated?((0,o.wg)(),(0,o.iD)(o.HY,{key:1},[(0,o.Wm)(u,{to:"/write",class:"nav-button"},{default:(0,o.w5)((()=>[(0,o.Uk)("Post")])),_:1}),(0,o.Wm)(u,{to:"/follows",class:"nav-button"},{default:(0,o.w5)((()=>[(0,o.Uk)("Follows")])),_:1})],64)):((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o.Wm)(u,{to:"/login",class:"nav-button"},{default:(0,o.w5)((()=>[(0,o.Uk)("Login")])),_:1}),(0,o.Wm)(u,{to:"/register",class:"nav-button"},{default:(0,o.w5)((()=>[(0,o.Uk)("Register")])),_:1})],64))])])])}t(7658);var j={name:"Navbar",data(){return{searchTerm:"",placeholder:"Search user...",searchCooldown:!1}},computed:{isAuthenticated(){return this.$store.state.isAuthenticated},pathToUsername(){return"/user/"+this.$store.state.username}},methods:{search(){if(this.searchCooldown)return;const e=this.searchTerm;if(this.searchTerm="",""===e)return void("Write something!"!==this.placeholder&&(this.placeholder="Write something!",setTimeout((()=>{this.placeholder="Search user..."}),3e3)));const s="/search/"+e;this.$router.push({path:s}),this.searchCooldown=!0,setTimeout((()=>{this.searchCooldown=!1}),1e3)},checkChars(){this.searchTerm=this.searchTerm.replace(/[^-_.a-zA-Z0-9]/g,"")}}},y=t(89);const b=(0,y.Z)(j,[["render",v],["__scopeId","data-v-303297fb"]]);var k=b;const U={id:"Follow",class:"Follow"},_={key:0},I={key:0},M={key:1};function C(e,s,t,a,r,n){const i=(0,o.up)("message"),u=(0,o.up)("user");return(0,o.wg)(),(0,o.iD)("div",U,[n.isAuthenticated?((0,o.wg)(),(0,o.iD)("div",_,[(0,o.Wm)(i,{title:r.title},null,8,["title"]),n.isFollowing?((0,o.wg)(),(0,o.iD)("div",M,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.following,(e=>((0,o.wg)(),(0,o.iD)("div",{key:e.username},[(0,o.Wm)(u,{user:e,followingBefore:!0},null,8,["user"])])))),128))])):((0,o.wg)(),(0,o.iD)("div",I,[(0,o.Wm)(i,{paragraphs:[r.noFollowingMessage]},null,8,["paragraphs"])]))])):(0,o.kq)("",!0)])}var x=t(7139);const F={class:"title"},D=["textContent"],T={class:"text"},S=["textContent"];function $(e,s,t,a,r,n){const i=(0,o.up)("container");return(0,o.wg)(),(0,o.j4)(i,null,{default:(0,o.w5)((()=>[(0,o._)("div",F,[t.title?((0,o.wg)(),(0,o.iD)("h1",{key:0,textContent:(0,x.zw)(t.title)},null,8,D)):(0,o.kq)("",!0)]),(0,o._)("div",T,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.paragraphs,((e,s)=>((0,o.wg)(),(0,o.iD)("p",{key:s,textContent:(0,x.zw)(e)},null,8,S)))),128))])])),_:1})}const A={id:"container",class:"container"},W={id:"content",class:"content"};function z(e,s){return(0,o.wg)(),(0,o.iD)("div",A,[(0,o._)("div",W,[(0,o.WI)(e.$slots,"default",{},void 0,!0)])])}const P={},O=(0,y.Z)(P,[["render",z],["__scopeId","data-v-79a20d72"]]);var q=O,E={components:{Container:q},name:"message",props:{title:{type:String,default:""},paragraphs:{type:Array,default:[]}}};const N=(0,y.Z)(E,[["render",$],["__scopeId","data-v-5bdf9b45"]]);var Z=N;const Y=e=>((0,o.dD)("data-v-5c91737e"),e=e(),(0,o.Cn)(),e),L={id:"user-data",class:"upper-box"},H={class:"user-info"},R=["textContent"],V=Y((()=>(0,o._)("br",null,null,-1))),B=["textContent"],K=Y((()=>(0,o._)("br",null,null,-1))),G=["textContent"],J=Y((()=>(0,o._)("div",{class:"description"},[(0,o._)("b",null,"Description:")],-1))),Q=["textContent"];function X(e,s,t,r,n,i){const u=(0,o.up)("font-awesome-icon"),l=(0,o.up)("container");return(0,o.wg)(),(0,o.j4)(l,{class:"container"},{default:(0,o.w5)((()=>[(0,o._)("div",L,[(0,o._)("div",H,[(0,o._)("span",{textContent:(0,x.zw)(i.userInfo.username),class:"username",onClick:s[0]||(s[0]=(...e)=>i.goToProfile&&i.goToProfile(...e))},null,8,R),V,(0,o._)("span",{textContent:(0,x.zw)(i.userInfo.name)},null,8,B),K,(0,o._)("span",{textContent:(0,x.zw)(i.userInfo.surname)},null,8,G)]),i.shouldShowBell?((0,o.wg)(),(0,o.j4)(u,{key:0,icon:["fas","bell"],class:(0,x.C_)({follow:i.isFollowing}),onClick:(0,a.iM)(i.followUser,["stop"])},null,8,["class","onClick"])):(0,o.kq)("",!0)]),J,(0,o._)("div",{id:"description",textContent:(0,x.zw)(i.computedDescription)},null,8,Q)])),_:1})}var ee={name:"user-data",components:{Container:q},data(){return{following:!1,followCooldown:!1}},props:{followingBefore:{type:Boolean,default:!1},user:{type:Object,default:function(){return{username:"Username",name:"Nome",surname:"Cognome",description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."}}}},computed:{computedDescription(){return""===this.user.description?"No description set!":this.user.description},isFollowing(){return this.following!==this.followingBefore},userInfo(){return{username:"Username: @"+this.user.username,name:"Name: "+this.user.name,surname:"Surname: "+this.user.surname}},shouldShowBell(){return this.$store.state.isAuthenticated&&this.user.username!==this.$store.state.username}},methods:{async followUser(){if(this.followCooldown||!this.$store.state.isAuthenticated)return;const e="/api/social/followers/"+this.user.username,s=this.following!==this.followingBefore?"DELETE":"POST";fetch(e,{method:s});this.following=!this.following,this.followCooldown=!0,setTimeout((()=>{this.followCooldown=!1}),1e3)},goToProfile(){const e="/user/"+this.user.username;this.$router.push({path:e})}}};const se=(0,y.Z)(ee,[["render",X],["__scopeId","data-v-5c91737e"]]);var te=se,ae={name:"Follow",components:{Message:Z,User:te},data(){return{title:"Following: ",noFollowingMessage:"You aren't following anyone at the moment!",following:[]}},computed:{isAuthenticated(){return this.$store.state.isAuthenticated},isFollowing(){return 0!==this.following.length}},methods:{async retrieveFollows(){const e=await fetch("/api/social/followers/"+this.$store.state.username);if(e.ok){const s=await e.json();this.following=s.following}}},watch:{"$store.state.isAuthenticated":{immediate:!0,handler(e){e&&this.retrieveFollows()}}}};const re=(0,y.Z)(ae,[["render",C],["__scopeId","data-v-094a9f82"]]);var ne=re;const oe={id:"Home",class:"Home"},ie={key:1},ue={key:0},le={key:1};function he(e,s,t,a,r,n){const i=(0,o.up)("message"),u=(0,o.up)("post");return(0,o.wg)(),(0,o.iD)("div",oe,[n.isAuthenticated?((0,o.wg)(),(0,o.iD)("div",ie,[n.feedsExist?((0,o.wg)(),(0,o.iD)("div",le,[(0,o.Wm)(i,{title:r.titleFeed,class:"feed"},null,8,["title"]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.feeds,(e=>((0,o.wg)(),(0,o.iD)("div",{key:e.messageId},[(0,o.Wm)(u,{messageInfo:{...e,author:void 0},author:e.author},null,8,["messageInfo","author"])])))),128))])):((0,o.wg)(),(0,o.iD)("div",ue,[(0,o.Wm)(i,{title:r.titleNoFeed,paragraphs:[r.paragraphsNoFeed]},null,8,["title","paragraphs"])]))])):((0,o.wg)(),(0,o.j4)(i,{key:0,title:r.titleUnauth,paragraphs:r.paragraphsUnauth},null,8,["title","paragraphs"]))])}const me=e=>((0,o.dD)("data-v-7f8396be"),e=e(),(0,o.Cn)(),e),de={class:"author"},ce={class:"username"},ge=["textContent"],pe={class:"info"},fe=["textContent"],we=me((()=>(0,o._)("div",{class:"break"},null,-1))),ve={class:"message"},je=["textContent"],ye=me((()=>(0,o._)("div",{class:"break"},null,-1))),be={class:"bottom"},ke={class:"time"},Ue=["textContent"],_e=me((()=>(0,o._)("div",{class:"break"},null,-1))),Ie={class:"likes"},Me=["textContent"];function Ce(e,s,t,r,n,i){const u=(0,o.up)("font-awesome-icon"),l=(0,o.up)("container");return(0,o.wg)(),(0,o.j4)(l,{class:"container"},{default:(0,o.w5)((()=>[(0,o._)("div",de,[(0,o._)("div",{class:"href",onClick:s[0]||(s[0]=(...e)=>i.messageRoute&&i.messageRoute(...e))}),(0,o._)("cite",ce,[(0,o._)("span",{class:"span-username",textContent:(0,x.zw)(i.formatUsername),onClick:s[1]||(s[1]=(...e)=>i.userRoute&&i.userRoute(...e))},null,8,ge)]),(0,o._)("cite",pe,[(0,o._)("span",{class:"span-info",textContent:(0,x.zw)(i.nameAndSurname)},null,8,fe)])]),we,(0,o._)("div",ve,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.formatMessage,((e,s)=>((0,o.wg)(),(0,o.iD)("p",{key:s,textContent:(0,x.zw)(e),class:"paragraph"},null,8,je)))),128))]),ye,(0,o._)("div",be,[(0,o._)("div",ke,[(0,o._)("p",{textContent:(0,x.zw)(i.formattedDate)},null,8,Ue)]),_e,(0,o._)("div",Ie,[(0,o._)("p",{class:"nOfLikes",textContent:(0,x.zw)(i.numberOfLikes)},null,8,Me),(0,o.Wm)(u,{icon:["fas","thumbs-up"],class:(0,x.C_)({liked:i.isLiked,"like-clickable":i.isAuthenticated}),onClick:(0,a.iM)(i.like,["stop"])},null,8,["class","onClick"])])])])),_:1})}var xe=t(6797),Fe=t.n(xe),De={name:"post",components:{Container:q},data(){return{liked:!1,likeCooldown:!1}},props:{author:{type:Object,default:function(){return{username:"Username",name:"Nome",surname:"Cognome"}}},messageInfo:{type:Object,default:function(){return{messageId:"00000000-0000-0000-0000-0000000000",message:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",createdAt:"1970-01-01T00:00:00Z",numberOfLikes:0,liked:!1}}}},computed:{nameAndSurname(){return this.author.name+" "+this.author.surname},formatUsername(){return"@"+this.author.username},numberOfLikes(){return!this.messageInfo.liked&&this.liked?this.messageInfo.numberOfLikes+1:this.messageInfo.liked&&this.liked?this.messageInfo.numberOfLikes-1:this.messageInfo.numberOfLikes},isLiked(){return this.messageInfo.liked!==this.liked},formattedDate(){return Fe()(this.messageInfo.createdAt).format("MMM DD, YYYY HH:mm:ss")},isAuthenticated(){return this.$store.state.isAuthenticated},formatMessage(){return"undefined"===typeof this.messageInfo.message?[]:this.messageInfo.message.split("\n")}},methods:{async like(){if(this.likeCooldown||!this.$store.state.isAuthenticated)return;const e="/api/social/like/"+this.messageInfo.messageId,s=this.liked!==this.messageInfo.liked?"DELETE":"POST";fetch(e,{method:s});this.liked=!this.liked,this.likeCooldown=!0,setTimeout((()=>{this.likeCooldown=!1}),1e3)},userRoute(){const e="/user/"+this.author.username;this.$router.push({path:e})},messageRoute(){const e="/message/"+this.author.username+"/"+this.messageInfo.messageId;this.$router.push({path:e})}}};const Te=(0,y.Z)(De,[["render",Ce],["__scopeId","data-v-7f8396be"]]);var Se=Te,$e={name:"Home",components:{Message:Z,Post:Se},data(){return{titleUnauth:"Welcome!",paragraphsUnauth:['This is a social network web page created by Michele Scomina for the course "Programmazione Web".',"You are currently in the home page.","This page has been built using the Vue.js framework.","You are not authenticated as of right now!"],feeds:[],titleNoFeed:"No feeds!",titleFeed:"Feeds:",paragraphsNoFeed:"You currently do not have any feeds! Start following someone to start getting feeds in your homepage!"}},computed:{isAuthenticated(){return this.$store.state.isAuthenticated},feedsExist(){return!(0===this.feeds.length)}},methods:{async retrieveFeed(){const e=await fetch("/api/social/feed");if(e.ok){const s=await e.json();this.feeds=s.messages}}},watch:{"$store.state.isAuthenticated":{immediate:!0,handler(e){e&&this.retrieveFeed()}}}};const Ae=(0,y.Z)($e,[["render",he],["__scopeId","data-v-3c676124"]]);var We=Ae;const ze={id:"Login",class:"Login"};function Pe(e,s,t,a,r,n){const i=(0,o.up)("form-component"),u=(0,o.up)("message");return(0,o.wg)(),(0,o.iD)("div",ze,[(0,o.Wm)(i,{class:"form",fields:r.fields,onFormSubmitted:n.handleSubmit,buttonText:r.buttonText,titleText:r.titleText},null,8,["fields","onFormSubmitted","buttonText","titleText"]),r.showMessage?((0,o.wg)(),(0,o.j4)(u,{key:0,class:"message",paragraphs:[r.message]},null,8,["paragraphs"])):(0,o.kq)("",!0)])}const Oe=["textContent"],qe=["type","placeholder","onUpdate:modelValue"],Ee=["type","placeholder","onUpdate:modelValue"],Ne=["textContent"];function Ze(e,s,t,r,n,i){const u=(0,o.up)("container");return(0,o.wg)(),(0,o.j4)(u,null,{default:(0,o.w5)((()=>[(0,o._)("form",{onSubmit:s[0]||(s[0]=(0,a.iM)(((...e)=>i.submitForm&&i.submitForm(...e)),["prevent"])),class:"form"},[(0,o._)("h1",{textContent:(0,x.zw)(t.titleText)},null,8,Oe),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.fields,(e=>((0,o.wg)(),(0,o.iD)("div",{key:e.name},[e.isParagraph?(0,o.wy)(((0,o.wg)(),(0,o.iD)("textarea",{key:0,type:e.type,placeholder:e.label,"onUpdate:modelValue":s=>n.fieldValues[e.name]=s,class:(0,x.C_)({writingMessage:t.isWritingMessage})},null,10,qe)),[[a.nr,n.fieldValues[e.name]]]):(0,o.wy)(((0,o.wg)(),(0,o.iD)("input",{key:1,type:e.type,placeholder:e.label,"onUpdate:modelValue":s=>n.fieldValues[e.name]=s},null,8,Ee)),[[a.YZ,n.fieldValues[e.name]]])])))),128)),(0,o._)("button",{class:"btn",type:"submit",textContent:(0,x.zw)(t.buttonText)},null,8,Ne)],32)])),_:1})}var Ye={components:{Container:q},data(){return{fieldValues:{},cooldown:!1}},methods:{submitForm(){this.cooldown||(this.$emit("form-submitted",this.fieldValues),this.cooldown=!0,setTimeout((()=>{this.cooldown=!1}),1e3))}},name:"custom-form",props:{buttonText:{type:String,default:"Submit"},titleText:{type:String,default:"Title"},isWritingMessage:{type:Boolean,default:!1},fields:Array}};const Le=(0,y.Z)(Ye,[["render",Ze],["__scopeId","data-v-d9e89600"]]);var He=Le,Re={data(){return{fields:[{name:"username",type:"text",label:"Username"},{name:"password",type:"password",label:"Password"}],buttonText:"Log in!",titleText:"Login",showMessage:!1,message:""}},components:{FormComponent:He,Message:Z},methods:{async handleSubmit(e){this.showMessage=!1;const s=Object.assign({},e);try{if(!s.username||!s.password)return this.showMessage=!0,void(this.message="Error: Please fill all the mandatory fields.");const e=await fetch("/api/auth/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});let a;if(this.showMessage=!0,!e.ok){if(404===e.status)try{if(a=await e.json(),"UsernameNotFound"===a.error)return void(this.message="Error: Could not find that username.")}catch(t){return void(this.message="Error: Could not find the server.")}return a=await e.json(),"IncorrectPasswordError"===a.error?void(this.message="Error: The credentials are not correct!"):void(this.message="Error: Unidentified error.")}a=await e.json(),this.$store.commit("authenticate"),this.$store.commit("setUsername",{username:s.username}),this.$router.push({path:"/"})}catch(a){console.log(a)}}}};const Ve=(0,y.Z)(Re,[["render",Pe],["__scopeId","data-v-a7eceb06"]]);var Be=Ve;const Ke={id:"MessageGUI",class:"MessageGUI"},Ge={key:0},Je={key:1},Qe={key:0},Xe={key:1};function es(e,s,t,a,r,n){const i=(0,o.up)("message",!0),u=(0,o.up)("post");return(0,o.wg)(),(0,o.iD)("div",Ke,[r.noUsernameFound?((0,o.wg)(),(0,o.iD)("div",Ge,[(0,o.Wm)(i,{title:"Error: ",paragraphs:[n.noUsernameMessage]},null,8,["paragraphs"])])):((0,o.wg)(),(0,o.iD)("div",Je,[r.noMessageFound?((0,o.wg)(),(0,o.iD)("div",Qe,[(0,o.Wm)(i,{title:"Error: ",paragraphs:[n.messageNotFoundMessage]},null,8,["paragraphs"])])):((0,o.wg)(),(0,o.iD)("div",Xe,[(0,o.Wm)(i,{title:r.title},null,8,["title"]),(0,o.Wm)(u,{author:r.message.author,messageInfo:{...r.message,author:void 0}},null,8,["author","messageInfo"])]))]))])}var ss={name:"message-gui",components:{Message:Z,Post:Se},data(){return{usernameUrl:"",messageIdUrl:"",title:"Message: ",noUsernameFound:!1,noMessageFound:!1,message:{}}},computed:{noUsernameMessage(){return"undefined"!==typeof this.usernameUrl&&""!==this.usernameUrl?"Couldn't find a user with the username "+this.usernameUrl+".":"You didn't enter a proper username!"},messageNotFoundMessage(){return"undefined"!==typeof this.messageIdUrl&&""!==this.messageIdUrl?"Couldn't find the message "+this.messageIdUrl+" with the username "+this.usernameUrl+".":"You didn't enter a proper message!"}},created(){if((("undefined"===typeof this.usernameUrl||""===this.usernameUrl)&&"undefined"!==typeof this.$route.params.user||("undefined"===typeof this.messageIdUrl||""===this.messageIdUrl)&&"undefined"!==typeof this.$route.params.messageId)&&(this.usernameUrl=this.$route.params.user,this.usernameUrl=this.usernameUrl.replace(/[^-_.a-zA-Z0-9]/g,""),this.messageIdUrl=this.$route.params.messageId,this.messageIdUrl=this.messageIdUrl.replace(/[^-_.a-zA-Z0-9]/g,""),this.usernameUrl!==this.$route.params.username||this.messageIdUrl!==this.$route.params.messageId)){const e="/message/"+this.usernameUrl+"/"+this.messageIdUrl;this.$router.push({path:e})}this.$watch((()=>this.$route),((e,s)=>{if(this.usernameUrl=this.$route.params.user,this.usernameUrl=this.usernameUrl.replace(/[^-_.a-zA-Z0-9]/g,""),this.messageIdUrl=this.$route.params.messageId,this.messageIdUrl=this.messageIdUrl.replace(/[^-_.a-zA-Z0-9]/g,""),this.usernameUrl!==this.$route.params.username||this.messageIdUrl!==this.$route.params.messageId){const e="/message/"+this.usernameUrl+"/"+this.messageIdUrl;this.$router.push({path:e})}}))},methods:{async retrieveMessage(){if(""===this.usernameUrl)return this.noUsernameFound=!0,void(this.message={});if(""===this.messageIdUrl)return this.noMessageFound=!0,void(this.message={});const e=await fetch("/api/social/messages/"+this.usernameUrl+"/"+this.messageIdUrl),s=await e.json();if(e.ok)this.noMessageFound=!1,this.noUsernameFound=!1,this.message=s;else if(404===e.status){if("undefined"===typeof s.error)return void(this.noMessageFound=!0);"MessageNotFound"===s.error&&(this.noMessageFound=!0),"UsernameNotFound"===s.error&&(this.noUsernameFound=!0)}}},watch:{usernameUrl:{immediate:!1,handler(e){this.retrieveMessage()}},messageIdUrl:{immediate:!1,handler(e){this.retrieveMessage()}}}};const ts=(0,y.Z)(ss,[["render",es],["__scopeId","data-v-49e2f3da"]]);var as=ts;const rs={id:"Write",class:"Write"};function ns(e,s,t,a,r,n){const i=(0,o.up)("form-component"),u=(0,o.up)("message");return(0,o.wg)(),(0,o.iD)("div",rs,[(0,o.Wm)(i,{fields:r.fields,buttonText:"Publish",titleText:"Message: ",onFormSubmitted:n.publishMessage,isWritingMessage:!0},null,8,["fields","onFormSubmitted"]),r.error?((0,o.wg)(),(0,o.j4)(u,{key:0,paragraphs:[r.errorMessage]},null,8,["paragraphs"])):(0,o.kq)("",!0)])}var os={name:"write",components:{FormComponent:He,Message:Z},data(){return{fields:[{name:"message",type:"text",label:"Write a message you want to publish...",isParagraph:!0}],message:"",error:!1,errorMessage:"You can't post an empty message!"}},methods:{async publishMessage(e){const s=Object.assign({},e);try{if(!s.message)return this.error=!0,void(this.errorMessage="Error: You can't post an empty message!");const e=await fetch("/api/social/messages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});let t;if(!e.ok)return this.error=!0,404===e.status?void(this.errorMessage="Error: Could not find the server."):void(this.errorMessage="Unidentified error.");t=await e.json();const a="/message/"+t.author.username+"/"+t.messageId;this.$router.push({path:a})}catch(t){console.log(t)}}}};const is=(0,y.Z)(os,[["render",ns],["__scopeId","data-v-5b8cf64b"]]);var us=is;const ls={id:"NotFound",class:"NotFound"};function hs(e,s,t,a,r,n){const i=(0,o.up)("message");return(0,o.wg)(),(0,o.iD)("div",ls,[(0,o.Wm)(i,{title:r.title,paragraphs:r.paragraphs},null,8,["title","paragraphs"])])}var ms={data(){return{title:"Sorry!",paragraphs:["We couldn't find the page you were looking for.","If you believe this to be an error, contact Michele Scomina."]}},name:"NotFound",components:{Message:Z}};const ds=(0,y.Z)(ms,[["render",hs],["__scopeId","data-v-0d620a56"]]);var cs=ds;const gs={id:"Register",class:"Register"};function ps(e,s,t,a,r,n){const i=(0,o.up)("form-component"),u=(0,o.up)("message");return(0,o.wg)(),(0,o.iD)("div",gs,[(0,o.Wm)(i,{class:"form",fields:r.fields,onFormSubmitted:n.handleSubmit,buttonText:r.buttonText,titleText:r.titleText},null,8,["fields","onFormSubmitted","buttonText","titleText"]),r.showMessage?((0,o.wg)(),(0,o.j4)(u,{key:0,class:"message",paragraphs:[r.message]},null,8,["paragraphs"])):(0,o.kq)("",!0),(0,o.Wm)(u,{class:"message",paragraphs:r.serverMessage},null,8,["paragraphs"])])}var fs={data(){return{fields:[{name:"username",type:"text",label:"Username (5-20 characters)"},{name:"name",type:"text",label:"Name (2-20 characters)"},{name:"surname",type:"text",label:"Surname (2-20 characters)"},{name:"description",type:"text",label:"Write a short description about yourself... (max 300 characters, optional)",isParagraph:!0},{name:"password",type:"password",label:"Password"}],buttonText:"Register!",titleText:"Register a new user:",showMessage:!1,message:"",serverMessage:["Please note that the name and the surname may only have letters and spaces as inputs.",' Also, the username must be unique and may only be composed by letters, numbers and the following characters: "- _ ."']}},components:{FormComponent:He,Message:Z},methods:{async handleSubmit(e){this.showMessage=!1;const s=Object.assign({},e);try{if(!s.username||!s.name||!s.surname||!s.password)return this.showMessage=!0,void(this.message="Error: Please fill all the mandatory fields.");s.description||(s.description="");const e=await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});let t;if(this.showMessage=!0,!e.ok)return 404===e.status?void(this.message="Error: Could not find the server."):(t=await e.json(),"ValidationError"===t.error?void(this.message="Error: Please make sure your fields respect the given format."):"UsernameAlreadyTaken"===t.error?void(this.message="Error: This username has already been taken!"):"InternalServerError"===t.error?void(this.message="Error: Internal server error."):void(this.message="Error: Unidentified error."));t=await e.json(),this.message=t.message}catch(t){console.log(t)}}}};const ws=(0,y.Z)(fs,[["render",ps],["__scopeId","data-v-49837658"]]);var vs=ws;const js={id:"Search",class:"Search"},ys={key:0},bs={key:1};function ks(e,s,t,a,r,n){const i=(0,o.up)("message"),u=(0,o.up)("user");return(0,o.wg)(),(0,o.iD)("div",js,[(0,o.Wm)(i,{title:r.title},null,8,["title"]),n.hasResults?((0,o.wg)(),(0,o.iD)("div",bs,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.results,(e=>((0,o.wg)(),(0,o.iD)("div",{key:e.username},[(0,o.Wm)(u,{class:"user",user:e,followingBefore:e.isFollowing},null,8,["user","followingBefore"])])))),128))])):((0,o.wg)(),(0,o.iD)("div",ys,[(0,o.Wm)(i,{paragraphs:[r.noResultsMessage]},null,8,["paragraphs"])]))])}var Us={data(){return{searchString:"",results:[],title:"Results: ",noResultsMessage:"No results matched your query!"}},components:{Message:Z,User:te},computed:{hasResults(){return 0!==this.results.length}},created(){if(("undefined"===typeof this.searchString||""===this.searchString)&&"undefined"!==typeof this.$route.params.query&&(this.searchString=this.$route.params.query,this.searchString=this.searchString.replace(/[^-_.a-zA-Z0-9]/g,""),this.searchString!==this.$route.params.query)){const e="/search/"+this.searchString;this.$router.push({path:e})}this.$watch((()=>this.$route),((e,s)=>{if(this.searchString=this.$route.params.query,this.searchString=this.searchString.replace(/[^-_.a-zA-Z0-9]/g,""),this.searchString!==this.$route.params.query){const e="/search/"+this.searchString;this.$router.push({path:e})}}))},methods:{async search(){if(""===this.searchString)return void(this.results=[]);const e=await fetch("/api/social/search?q="+this.searchString);if(e.ok){const s=await e.json();this.results=s.users}else this.results=[]},formatUser(e){const{isFollowing:s,...t}=e;return t}},watch:{searchString:{immediate:!0,handler(e){this.search()}}}};const _s=(0,y.Z)(Us,[["render",ks],["__scopeId","data-v-77d915bf"]]);var Is=_s;const Ms={id:"UserProfile",class:"UserProfile"},Cs={key:0},xs={key:1},Fs={key:0},Ds={key:1};function Ts(e,s,t,a,r,n){const i=(0,o.up)("message"),u=(0,o.up)("user"),l=(0,o.up)("post");return(0,o.wg)(),(0,o.iD)("div",Ms,[r.noUsernameFound?((0,o.wg)(),(0,o.iD)("div",Cs,[(0,o.Wm)(i,{title:"Error: ",paragraphs:[n.noUsernameMessage]},null,8,["paragraphs"])])):((0,o.wg)(),(0,o.iD)("div",xs,[(0,o.Wm)(i,{title:r.titles[0]},null,8,["title"]),(0,o.Wm)(u,{user:r.user,followingBefore:r.user.isFollowing},null,8,["user","followingBefore"]),(0,o.Wm)(i,{title:r.titles[1]},null,8,["title"]),n.hasMessages?((0,o.wg)(),(0,o.iD)("div",Ds,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.messages,(e=>((0,o.wg)(),(0,o.iD)("div",{key:e.messageId},[(0,o.Wm)(l,{author:r.user,messageInfo:e},null,8,["author","messageInfo"])])))),128))])):((0,o.wg)(),(0,o.iD)("div",Fs,[(0,o.Wm)(i,{paragraphs:[n.noWrittenPosts]},null,8,["paragraphs"])]))]))])}var Ss={name:"user-profile",components:{Message:Z,Post:Se,User:te},data(){return{usernameUrl:"",user:{},messages:[],titles:["User: ","Messages: "],noUsernameFound:!1}},computed:{noUsernameMessage(){return"undefined"!==typeof this.usernameUrl&&""!==this.usernameUrl?"Couldn't find a user with the username "+this.usernameUrl+".":"You didn't enter a proper username!"},noWrittenPosts(){return"The user @"+this.usernameUrl+" never wrote any messages!"},hasMessages(){return 0!==this.messages.length}},created(){if(("undefined"===typeof this.usernameUrl||""===this.usernameUrl)&&"undefined"!==typeof this.$route.params.username&&(this.usernameUrl=this.$route.params.username,this.usernameUrl=this.usernameUrl.replace(/[^-_.a-zA-Z0-9]/g,""),this.usernameUrl!==this.$route.params.username)){const e="/user/"+this.usernameUrl;this.$router.push({path:e})}this.$watch((()=>this.$route),((e,s)=>{if(this.usernameUrl=this.$route.params.username,this.usernameUrl=this.usernameUrl.replace(/[^-_.a-zA-Z0-9]/g,""),this.usernameUrl!==this.$route.params.username){const e="/user/"+this.usernameUrl;this.$router.push({path:e})}}))},methods:{async retrieveDataAndMessages(){await this.retrieveUser(),await this.retrieveMessages()},async retrieveUser(){if(""===this.usernameUrl)return this.noUsernameFound=!0,void(this.user={});const e=await fetch("/api/social/users/"+this.usernameUrl);if(e.ok){this.noUsernameFound=!1;const s=await e.json();this.user=s}else this.noUsernameFound=!0},async retrieveMessages(){if(""===this.usernameUrl)return void(this.messages=[]);const e=await fetch("/api/social/messages/"+this.usernameUrl);if(e.ok){const s=await e.json();this.messages=s.messages}else this.messages=[]}},watch:{usernameUrl:{immediate:!1,handler(e){this.retrieveDataAndMessages()}}}};const $s=(0,y.Z)(Ss,[["render",Ts],["__scopeId","data-v-7fc78eee"]]);var As=$s;const Ws=[{path:"/login/",view:Be,title:"Login"},{path:"/write/",view:us,title:"New message"},{path:"/register/",view:vs,title:"Register"},{path:"/search/",view:Is,title:"Search"},{path:"/user/",view:As,title:"User"},{path:"/message/",view:as,title:"Message"},{path:"/follows/",view:ne,title:"Follows"}];var zs={data(){return{currentPath:window.location.pathname+"/"}},computed:{currentView(){let e;if("//"===this.currentPath)return document.title="Homepage",We;for(let s=0;s<Ws.length;s++){const t=Ws[s];this.currentPath.startsWith(t.path)&&(e=t["view"],document.title=t.title)}return"undefined"===typeof e?(document.title="Not Found",cs):e}},components:{navbar:k},watch:{$route(e){let s=!1;if(this.currentPath=e.path+"/","//"!==this.currentPath){for(let e=0;e<Ws.length;e++){const t=Ws[e];this.currentPath.startsWith(t.path)&&(document.title=t.title,s=!0)}s||(document.title="Not Found")}else document.title="Homepage"}},created(){let e=!1;"//"===this.currentPath&&(document.title="Homepage",e=!0);for(let s=0;s<Ws.length;s++){const t=Ws[s];this.currentPath.startsWith(t.path)&&(document.title=t.title,e=!0)}e||(document.title="Not Found")}};const Ps=(0,y.Z)(zs,[["render",u]]);var Os=Ps,qs=t(3494),Es=t(7749),Ns=t(8539);qs.vI.add(Ns.u8Q),qs.vI.add(Ns.qmU);const Zs=[{path:"/",component:We,meta:{requiresAuth:!1}},{path:"/login",component:Be,meta:{requiresAuth:!1}},{path:"/write",component:us,meta:{requiresAuth:!0}},{path:"/register",component:vs,meta:{requiresAuth:!1}},{path:"/search/:query",component:Is,meta:{requiresAuth:!1}},{path:"/user/:username",component:As,meta:{requiresAuth:!1}},{path:"/follows",component:ne,meta:{requiresAuth:!0}},{path:"/message/:user/:messageId",component:as,meta:{requiresAuth:!1}}],Ys=(0,n.MT)({state(){return{isAuthenticated:!1,username:""}},mutations:{authenticate(e){e.isAuthenticated=!0},setUsername(e,s){e.username=s.username}},actions:{async fetchAuthentication({commit:e}){const s=await fetch("/api/social/whoami");if(s.ok){const t=await s.json();e("authenticate"),e("setUsername",{username:t.username})}}}});Ys.dispatch("fetchAuthentication");const Ls=(0,r.p7)({history:(0,r.PO)(),routes:Zs});setTimeout((()=>{Ls.beforeEach(((e,s,t)=>{e.matched.some((e=>e.meta.requiresAuth))?Ys.state.isAuthenticated?t():t({path:"/login"}):t()}));const e=(0,a.ri)(Os);e.use(Ls),e.use(Ys),e.component("font-awesome-icon",Es.GN),e.mount("#app")}),250)}},s={};function t(a){var r=s[a];if(void 0!==r)return r.exports;var n=s[a]={id:a,loaded:!1,exports:{}};return e[a].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}t.m=e,function(){var e=[];t.O=function(s,a,r,n){if(!a){var o=1/0;for(h=0;h<e.length;h++){a=e[h][0],r=e[h][1],n=e[h][2];for(var i=!0,u=0;u<a.length;u++)(!1&n||o>=n)&&Object.keys(t.O).every((function(e){return t.O[e](a[u])}))?a.splice(u--,1):(i=!1,n<o&&(o=n));if(i){e.splice(h--,1);var l=r();void 0!==l&&(s=l)}}return s}n=n||0;for(var h=e.length;h>0&&e[h-1][2]>n;h--)e[h]=e[h-1];e[h]=[a,r,n]}}(),function(){t.n=function(e){var s=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(s,{a:s}),s}}(),function(){t.d=function(e,s){for(var a in s)t.o(s,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:s[a]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)}}(),function(){t.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};t.O.j=function(s){return 0===e[s]};var s=function(s,a){var r,n,o=a[0],i=a[1],u=a[2],l=0;if(o.some((function(s){return 0!==e[s]}))){for(r in i)t.o(i,r)&&(t.m[r]=i[r]);if(u)var h=u(t)}for(s&&s(a);l<o.length;l++)n=o[l],t.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return t.O(h)},a=self["webpackChunkpublic"]=self["webpackChunkpublic"]||[];a.forEach(s.bind(null,0)),a.push=s.bind(null,a.push.bind(a))}();var a=t.O(void 0,[998],(function(){return t(272)}));a=t.O(a)})();
//# sourceMappingURL=app.dfe6499e.js.map